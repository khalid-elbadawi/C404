<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Lecture 4: Branching and Looping â€“ C404: Assembly Language</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<link href="../site_libs/quarto-contrib/line-highlight-1.0.0/line-highlight.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="../index.html" class="navbar-brand navbar-brand-logo">
    <img src="../images/fmsi.png" alt="" class="navbar-logo">
    </a>
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">C404: Assembly Language</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-lectures" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Lectures</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-lectures">    
        <li>
    <a class="dropdown-item" href="../lectures/lec01.html">
 <span class="dropdown-text">Lecture 1: Basic Concepts</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../lectures/lec02.html">
 <span class="dropdown-text">Lecture 2: Assembly Language Fundamentals</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../lectures/lec03.html">
 <span class="dropdown-text">Lecture 3: Binary Arithmetic, Logic and Addressing</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../lectures/lec04.html">
 <span class="dropdown-text">Lecture 4: Branching and Looping</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-exercises" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Exercises</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-exercises">    
        <li>
    <a class="dropdown-item" href="../exercises/inclass01.html">
 <span class="dropdown-text">Exercise 1</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../exercises/inclass02.html">
 <span class="dropdown-text">Exercise 2</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../exercises/inclass03.html">
 <span class="dropdown-text">Exercise 3</span></a>
  </li>  
    </ul>
  </li>
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
  <div id="quarto-announcement" data-announcement-id="f05b4cca1daa1827a0cc784371537e32" class="alert alert-primary hidden"><i class="bi bi-telegram quarto-announcement-icon"></i><div class="quarto-announcement-content">
<p>Please join the course group at <a href="https://t.me/+PE3cTMyrv5s3OGI0">FMSI-CS404-ASSEMBLY</a>; Telegram Group</p>
</div><i class="bi bi-x-lg quarto-announcement-action"></i></div>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#objectives" id="toc-objectives" class="nav-link active" data-scroll-target="#objectives">Objectives</a></li>
  <li><a href="#branching" id="toc-branching" class="nav-link" data-scroll-target="#branching">Branching</a>
  <ul class="collapse">
  <li><a href="#instruction-pointer" id="toc-instruction-pointer" class="nav-link" data-scroll-target="#instruction-pointer">Instruction Pointer</a></li>
  <li><a href="#jmp-instruction" id="toc-jmp-instruction" class="nav-link" data-scroll-target="#jmp-instruction"><code>JMP</code> Instruction</a></li>
  <li><a href="#loop-instruction" id="toc-loop-instruction" class="nav-link" data-scroll-target="#loop-instruction"><code>LOOP</code> Instruction</a></li>
  <li><a href="#test-instruction" id="toc-test-instruction" class="nav-link" data-scroll-target="#test-instruction"><code>TEST</code> Instruction</a></li>
  <li><a href="#cmp-instruction" id="toc-cmp-instruction" class="nav-link" data-scroll-target="#cmp-instruction"><code>CMP</code> Instruction</a></li>
  <li><a href="#jcc-instruction-conditional-jump" id="toc-jcc-instruction-conditional-jump" class="nav-link" data-scroll-target="#jcc-instruction-conditional-jump"><code>Jcc</code> Instruction (Conditional Jump)</a></li>
  </ul></li>
  <li><a href="#implementing-high-level-flow-structures" id="toc-implementing-high-level-flow-structures" class="nav-link" data-scroll-target="#implementing-high-level-flow-structures">Implementing High-Level Flow Structures</a>
  <ul class="collapse">
  <li><a href="#implementing-if-statements" id="toc-implementing-if-statements" class="nav-link" data-scroll-target="#implementing-if-statements">Implementing IF statements</a></li>
  </ul></li>
  </ul>
<div class="quarto-alternate-formats"><h2>Other Formats</h2><ul><li><a href="lec04.pdf"><i class="bi bi-file-pdf"></i>PDF</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Lecture 4: Branching and Looping</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="objectives" class="level2">
<h2 class="anchored" data-anchor-id="objectives">Objectives</h2>
<ol type="1">
<li>Understand relative and absolute offset addresses</li>
<li>Learn all instructions provided by the Intel Microprocessors that you need for decision-making logic.</li>
<li>Learn how to translate IF statement, switch statement, and conditional loop found in high-level languages into assembly language.</li>
</ol>
</section>
<section id="branching" class="level2">
<h2 class="anchored" data-anchor-id="branching">Branching</h2>
<ul>
<li><p>By default, the CPU loads and executes programs sequentially.</p></li>
<li><p>A branch, or transfer of control, is a way of altering the order in which statements are executed.</p></li>
<li><p>There are two basic types of transfer:</p>
<ol type="1">
<li><p><strong>Unconditional transfer</strong>, in which a transfer is occurred unconditionally.</p></li>
<li><p><strong>Conditional transfer</strong>, in which a transfer is occurred based on a certain condition.</p></li>
</ol></li>
</ul>
<section id="instruction-pointer" class="level3">
<h3 class="anchored" data-anchor-id="instruction-pointer">Instruction Pointer</h3>
<ul>
<li>The EIP, or instruction pointer , register contains the address of the next instruction to be executed. Certain machine instructions manipulate EIP, causing the program to <u><em>branch</em></u> to a new location. These instructions are JMP, Jcc, LOOP, CALL, RET, or IRET.</li>
</ul>
<section id="relative-vs-absolute-offset-address" class="level4">
<h4 class="anchored" data-anchor-id="relative-vs-absolute-offset-address">Relative vs Absolute Offset Address</h4>
<ul>
<li><p>The EIP can be updated based on a target address.</p></li>
<li><p>The target address, within the instruction stream, can be <strong>relative offset</strong> or <strong>absolute offset</strong></p></li>
<li><p>A <strong>relative offset</strong> is a signed <em>displacement</em> to the current value of the EIP.</p>
<p><span class="math display">\[ \text{EIP} = \text{EIP} + \text{Target displacement} \]</span></p></li>
<li><p>An <strong>absolute address</strong> is an offset from the base of the code segment (i.,e., offset from address 0 of a segment).</p>
<p><span class="math display">\[ \text{EIP} = \text{Target Address} \]</span></p></li>
<li><p>Relative address can be specified in either of the following ways</p>
<table class="caption-top table">
<colgroup>
<col style="width: 22%">
<col style="width: 77%">
</colgroup>
<thead>
<tr class="header">
<th>Address format</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>rel8</code></td>
<td>A constant value in the range from -128 to 127 bytes.</td>
</tr>
<tr class="even">
<td><code>rel16</code></td>
<td>A relative address within the same code segment.</td>
</tr>
<tr class="odd">
<td><code>rel32</code></td>
<td>A relative address within the same code segment.</td>
</tr>
</tbody>
</table>
<div class="callout callout-style-simple callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>A relative offset (<code>rel8</code>, <code>rel16</code>, or <code>rel32</code>) is generally specified as a label in assembly code, but at the machine code level, it is encoded as a signed 8-, 16-, or 32-bit immediate value.</p>
</div>
</div></li>
<li><p>Absolute address can be specified as an address in general-purpose register or an address specified using memory addressing mode.</p></li>
</ul>
</section>
</section>
<section id="jmp-instruction" class="level3">
<h3 class="anchored" data-anchor-id="jmp-instruction"><code>JMP</code> Instruction</h3>
<div class="callout callout-style-simple callout-important no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Syntax
</div>
</div>
<div class="callout-body-container callout-body">
<div class="sourceCode" id="cb1" data-code-line-numbers=""><pre class="sourceCode nasm code-with-copy"><code class="sourceCode nasm"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>        <span class="cf">JMP</span>   <span class="op">&lt;</span>destination<span class="op">&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<ul>
<li><p>The JMP instruction causes an unconditional transfer to a destination address.</p></li>
<li><p>The destination (target) operand specifies the address of the instruction being jumped to. This operand can be an immediate value, a general-purpose register, or a memory location.</p>
<blockquote class="blockquote">
<p>In this course, we only consider the immediate value for the destination operand.</p>
</blockquote></li>
<li><p>Thus, the JMP instruction takes the following types (for this course):</p>
<pre data-code-line-numbers=""><code>        JMP   rel8          ; relative address
        JMP   rel16         ; relative address (not supported in 64-bit mode)
        JMP   rel32         ; relative address
        JMP   reg/mem16     ; absolute address (not supported in 64-bit mode)
        JMP   reg/mem32     ; aboslute address (not supported in 64-bit mode)</code></pre></li>
</ul>
<section id="types-of-jumps" class="level4">
<h4 class="anchored" data-anchor-id="types-of-jumps">Types of Jumps:</h4>
<ol type="1">
<li><strong>Near Jump</strong>: A jump to instruction within the current code segment (intra-segment jump). Here the displacement is either <code>rel16</code>, <code>rel32</code>, <code>reg/mem16</code>, <code>reg/mem32</code>.</li>
<li><strong>Short jump</strong>: A near jump where the jump is limited to -128 to +127 from the current EIP value. Here the displacement is <code>rel8</code>.</li>
<li><strong>Far Jump</strong>: A jump to an instruction located in a different segment than the current code segment but at the same privilege level (inter-segment jump) (NOT covered).</li>
</ol>
<div class="callout callout-style-simple callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>There is no difference in the coding for a relative short jump and for a relative near jump. The assembler uses a short jump if the displacement is within the small range in order to generate more compact code. A near jump is used automatically if the displacement is more than 128 bytes away.</p>
</div>
</div>
</section>
<section id="example" class="level4">
<h4 class="anchored" data-anchor-id="example">Example</h4>
<div class="sourceCode" id="cb3" data-code-line-numbers=""><pre class="sourceCode nasm code-with-copy"><code class="sourceCode nasm"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>        <span class="kw">mov</span>   <span class="kw">ax</span><span class="op">,</span> <span class="dv">0</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">top:</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>        <span class="kw">mov</span>   <span class="kw">bx</span><span class="op">,</span> <span class="dv">5</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>        <span class="kw">add</span>   <span class="kw">bx</span><span class="op">,</span> <span class="dv">1</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>        .</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>        .</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>        .</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>        <span class="cf">jmp</span>   top</span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>        </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</section>
<section id="loop-instruction" class="level3">
<h3 class="anchored" data-anchor-id="loop-instruction"><code>LOOP</code> Instruction</h3>
<div class="callout callout-style-simple callout-important no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Syntax
</div>
</div>
<div class="callout-body-container callout-body">
<div class="sourceCode" id="cb4" data-code-line-numbers=""><pre class="sourceCode nasm code-with-copy"><code class="sourceCode nasm"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>        <span class="kw">LOOP</span>    <span class="op">&lt;</span>destination<span class="op">&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Rule
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li>The destination operand must be <code>rel8</code>.</li>
</ul>
</div>
</div>
<ul>
<li><p>The loop instruction repeats a block of statements a specific number of times (determined by <code>ECX</code> register).</p></li>
<li><p><code>ECX</code> is automatically used as a counter and is decremented each time the loop repeats.</p></li>
<li><p>Example</p></li>
</ul>
<div class="grid">
<div class="g-col-6">
<div class="sourceCode" id="cb5" data-code-line-numbers=""><pre class="sourceCode nasm code-with-copy"><code class="sourceCode nasm"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>        <span class="kw">mov</span>   <span class="kw">ax</span><span class="op">,</span> <span class="dv">1</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>        <span class="kw">mov</span>   <span class="kw">ecx</span><span class="op">,</span> <span class="dv">5</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">top:</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>        <span class="kw">add</span>   <span class="kw">ax</span><span class="op">,</span> <span class="kw">ax</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>        <span class="kw">loop</span>  top</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="g-col-6">
<p><img src="..\images/loop.png" class="img-fluid"></p>
</div>
</div>
<section id="more-examples" class="level4">
<h4 class="anchored" data-anchor-id="more-examples">More Examples</h4>
<div id="exm-1" class="theorem example">
<p><span class="theorem-title"><strong>Example 1</strong></span> Write an assembly program to compute the sum of the following series</p>
<p><span class="math display">\[
S = 1 + 2 + 4 + 8 + \cdots + 1024
\]</span></p>
</div>
<p>Solution:</p>
<p>Here, we can re-write the series as follows:</p>
<p><span class="math display">\[
S = 2^0 + 2^1 + 2^2 + 2^3 + \cdots + 2^{10}
\]</span></p>
<p>Therefore, we can set <code>ECX</code> to 10. However, setting <code>ECX</code> to 10 implies that the loop starts from 10 and ends at 1. This also implies that <span class="math inline">\(2^0\)</span> wonâ€™t be added. To handle it, we can add <span class="math inline">\(2^0\)</span> when we initialize the sum <span class="math inline">\(S\)</span>.</p>
<div class="sourceCode" id="cb6" data-code-line-numbers=""><pre class="sourceCode nasm code-with-copy"><code class="sourceCode nasm"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>        <span class="kw">section</span> <span class="fu">.data</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="fu">varS:</span>   <span class="dt">dd</span>      <span class="dv">0</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>        <span class="kw">section</span> <span class="fu">.text</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a><span class="fu">_main:</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>        <span class="kw">mov</span>     <span class="kw">eax</span><span class="op">,</span> <span class="dv">1</span>        <span class="co">; first elm is 1</span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>        <span class="kw">add</span>     <span class="op">[</span>varS<span class="op">],</span> <span class="kw">eax</span>   <span class="co">; add 1 to S</span></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>        <span class="kw">mov</span>     <span class="kw">ecx</span><span class="op">,</span> <span class="dv">10</span>       <span class="co">; set loop counter to 10</span></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a><span class="fu">top:</span></span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>        <span class="kw">add</span>     <span class="kw">eax</span><span class="op">,</span> <span class="kw">eax</span>      <span class="co">; set eax = 2 * eax</span></span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>        <span class="kw">add</span>     <span class="op">[</span>varS<span class="op">],</span> <span class="kw">eax</span>   <span class="co">; add eax to S</span></span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>        <span class="kw">loop</span>    top</span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>        <span class="cf">ret</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="callout callout-style-simple callout-caution no-icon">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-body-container">
<p>In the previous program, we are accessing a memory location in each iteration. Therefore, if the number of iterations is quite high, then we have too many memory accesses.</p>
<p>Most CPUs have a cache memory, which is a smaller, faster memory and located closer to the processor core.</p>
<p>When accessing the memory location <code>varS</code> for the first time, the content is stored into the main memory (RAM) (cache miss) and into the cache memory. However, in the subsequent memory accesses, the CPU is accessing the cache memory rather than the main memory (we call it temporal locality).</p>
<p>To avoid too many memory accesses, we can store the sum in a CPU register and then we update <code>varS</code> after the loop has been completely executed. This will definitely improve the program performance (in terms of time)</p>
</div>
</div>
</div>
<p><em>Another solution</em>:</p>
<div class="sourceCode" id="cb7" data-code-line-numbers=""><pre class="sourceCode nasm code-with-copy"><code class="sourceCode nasm"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>        <span class="kw">section</span> <span class="fu">.bss</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="fu">varS:</span>   <span class="dt">resd</span>    <span class="dv">1</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>        <span class="kw">section</span> <span class="fu">.text</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a><span class="fu">_main:</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>        <span class="co">; we store the sum in EBX register</span></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>        <span class="kw">mov</span>     <span class="kw">eax</span><span class="op">,</span> <span class="dv">1</span>        <span class="co">; first elm is 1</span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>        <span class="kw">mov</span>     <span class="kw">ebx</span><span class="op">,</span> <span class="kw">eax</span>      <span class="co">; set sum (ebx) to 1</span></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>        <span class="kw">mov</span>     <span class="kw">ecx</span><span class="op">,</span> <span class="dv">10</span>       <span class="co">; set loop counter to 10</span></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a><span class="fu">top:</span></span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>        <span class="kw">add</span>     <span class="kw">eax</span><span class="op">,</span> <span class="kw">eax</span>      <span class="co">; set eax = 2 * eax</span></span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>        <span class="kw">add</span>     <span class="kw">ebx</span><span class="op">,</span> <span class="kw">eax</span>      <span class="co">; add eax to sum (ebx)</span></span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a>        <span class="kw">loop</span>    top</span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a>        <span class="kw">mov</span>     <span class="op">[</span>varS<span class="op">],</span> <span class="kw">ebx</span>   <span class="co">; store the result </span></span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a>        <span class="cf">ret</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div id="exm-2" class="theorem example">
<p><span class="theorem-title"><strong>Example 2</strong></span> Suppose you have the following signed 16-bit integer array hardcoded in your program:</p>
<pre data-code-line-numbers=""><code>  arrX[] = {13, 22, 18, 10, 25}</code></pre>
<p>Write an assembly program to store the above array in the data section and then calculate the sum of its elements. Store the sum in <code>sum</code> variable.</p>
</div>
<p><em>Solution:</em></p>
<div class="sourceCode" id="cb9" data-code-line-numbers=""><pre class="sourceCode nasm code-with-copy"><code class="sourceCode nasm"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>        <span class="kw">section</span> <span class="fu">.data</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="fu">arrX:</span>   <span class="dt">dw</span>      <span class="dv">13</span><span class="op">,</span> <span class="dv">22</span><span class="op">,</span> <span class="dv">18</span><span class="op">,</span> <span class="dv">10</span><span class="op">,</span> <span class="dv">25</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>ARRSIZ  <span class="dt">equ</span>     <span class="op">($</span> <span class="op">-</span> arrX<span class="op">)</span> <span class="op">/</span> <span class="dv">2</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="fu">sum:</span>    <span class="dt">dw</span>      <span class="dv">0</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>        <span class="kw">section</span> <span class="fu">.text</span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a><span class="fu">_main:</span></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>        <span class="kw">mov</span>     <span class="kw">edi</span><span class="op">,</span> arrX     <span class="co">; edi points to 1st elm</span></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>        <span class="kw">mov</span>     <span class="kw">ecx</span><span class="op">,</span> ARRSIZ   <span class="co">; set counter</span></span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>        <span class="kw">mov</span>     <span class="kw">ax</span><span class="op">,</span> <span class="dv">0</span>         <span class="co">; set sum to 0</span></span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a><span class="fu">L1:</span></span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a>        <span class="kw">add</span>     <span class="kw">ax</span><span class="op">,</span> <span class="op">[</span><span class="kw">edi</span><span class="op">]</span>     <span class="co">; load next elm and add it to sum</span></span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a>        <span class="kw">add</span>     <span class="kw">edi</span><span class="op">,</span> <span class="dv">2</span>        <span class="co">; set edi to point to next elm</span></span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a>        <span class="kw">loop</span>    L1            <span class="co">; loop</span></span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a>        <span class="kw">mov</span>     <span class="op">[</span>sum<span class="op">],</span> <span class="kw">ax</span>       <span class="co">; store sum</span></span>
<span id="cb9-17"><a href="#cb9-17" aria-hidden="true" tabindex="-1"></a>        <span class="cf">ret</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="nested-loop" class="level4">
<h4 class="anchored" data-anchor-id="nested-loop">Nested Loop</h4>
<ul>
<li><p>How to implement the following nested loop:</p>
<div class="sourceCode" id="cb10" data-code-line-numbers=""><pre class="sourceCode cpp code-with-copy"><code class="sourceCode cpp"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i<span class="op">=</span><span class="dv">100</span><span class="op">;</span> i <span class="op">!=</span> <span class="dv">0</span><span class="op">;</span> i<span class="op">--)</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> j<span class="op">=</span><span class="dv">50</span><span class="op">;</span> j <span class="op">!=</span> <span class="dv">0</span><span class="op">;</span> j<span class="op">--)</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>    <span class="op">...</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>in assembly language?</p></li>
<li><p>Unfortunately, the <code>LOOP</code> instruction has only <em>one counter</em>, which is <code>ECX</code>.</p></li>
<li><p>To tackle this problem, we must preserve the outer loop counter before executing the inner loop, and restore the outer loop counter before executing the outerâ€™s <code>LOOP</code> instruction. Here is an a solution:</p>
<div class="sourceCode" id="cb11" data-code-line-numbers=""><pre class="sourceCode nasm code-with-copy"><code class="sourceCode nasm"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>        <span class="kw">section</span> <span class="fu">.bss</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="fu">count:</span>  <span class="dt">resd</span>    <span class="dv">1</span>         <span class="co">; to store outer loop counter</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>        <span class="kw">section</span> <span class="fu">.text</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>        .</span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>        .</span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>        <span class="kw">mov</span>     <span class="kw">ecx</span><span class="op">,</span> <span class="dv">100</span>  <span class="co">; # of iterations for outer loop</span></span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a><span class="fu">OUTER:</span></span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>        <span class="kw">mov</span>     <span class="op">[</span>count<span class="op">],</span> <span class="kw">ecx</span>  <span class="co">; preserve outer loop counter</span></span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a>        <span class="kw">mov</span>     <span class="kw">ecx</span><span class="op">,</span> <span class="dv">50</span>   <span class="co">; # of iterations for inner loop</span></span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a><span class="fu">INNER:</span></span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a>        .</span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a>        .</span>
<span id="cb11-15"><a href="#cb11-15" aria-hidden="true" tabindex="-1"></a>        <span class="kw">loop</span>    INNER</span>
<span id="cb11-16"><a href="#cb11-16" aria-hidden="true" tabindex="-1"></a>        <span class="kw">mov</span>     <span class="kw">ecx</span><span class="op">,</span> <span class="op">[</span>count<span class="op">]</span></span>
<span id="cb11-17"><a href="#cb11-17" aria-hidden="true" tabindex="-1"></a>        <span class="kw">loop</span>    OUTER</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
<li><p>In future lecture, we can enhance this solution by using <strong><em>run-time stack</em></strong>.</p></li>
</ul>
</section>
</section>
<section id="test-instruction" class="level3">
<h3 class="anchored" data-anchor-id="test-instruction"><code>TEST</code> Instruction</h3>
<div class="callout callout-style-simple callout-important no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Syntax
</div>
</div>
<div class="callout-body-container callout-body">
<div class="sourceCode" id="cb12" data-code-line-numbers=""><pre class="sourceCode nasm code-with-copy"><code class="sourceCode nasm"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>        <span class="kw">TEST</span>    <span class="op">&lt;</span>destination<span class="op">&gt;,</span> <span class="op">&lt;</span>source<span class="op">&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<ul>
<li><p><code>TEST</code> instruction performs an <strong><em>implied</em></strong> <code>AND</code> operation of two operands and set the <code>SF</code>, <code>ZF</code>, and <code>PF</code> flags according to the results.</p></li>
<li><p>The flags can then be tested by the conditional jump or loop instruction.</p></li>
<li><p><code>TEST</code> instruction differs from the <code>AND</code> instruction in that it does not alter either of the operands</p></li>
</ul>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Rules
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li><p>Both operands must be of the same size</p></li>
<li><p>Both operands cannot be memory locations</p></li>
<li><p>Destination operand cannot be immediate</p></li>
</ul>
</div>
</div>
</section>
<section id="cmp-instruction" class="level3">
<h3 class="anchored" data-anchor-id="cmp-instruction"><code>CMP</code> Instruction</h3>
<div class="callout callout-style-simple callout-important no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Syntax
</div>
</div>
<div class="callout-body-container callout-body">
<div class="sourceCode" id="cb13" data-code-line-numbers=""><pre class="sourceCode nasm code-with-copy"><code class="sourceCode nasm"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>        <span class="kw">CMP</span>     <span class="op">&lt;</span>destination<span class="op">&gt;,</span> <span class="op">&lt;</span>source<span class="op">&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<ul>
<li><p><code>CMP</code> instruction is used to compare between two integral values (integers or characters).</p></li>
<li><p>It performs an <strong><em>implied</em></strong> subtraction of a source operand from a destination operand.</p></li>
<li><p>It affects ALL status flags according to the value the destination would have had if actual subtraction had taken place. Through these flags, we can compare the two operands:</p>
<ul>
<li><p>If the two operands are treated as unsigned, then</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>ZF</th>
<th>CF</th>
<th>Comparison Result</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>0</td>
<td>0</td>
<td>destination &gt; source</td>
</tr>
<tr class="even">
<td>0</td>
<td>1</td>
<td>destination &lt; source</td>
</tr>
<tr class="odd">
<td>1</td>
<td>*</td>
<td>destination = source</td>
</tr>
</tbody>
</table></li>
<li><p>If the two operands are treated as signed, then</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>ZF</th>
<th>SF</th>
<th>OF</th>
<th>Comparison Result</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>0</td>
<td>0</td>
<td>0</td>
<td>destination &gt; source</td>
</tr>
<tr class="even">
<td>0</td>
<td>0</td>
<td>1</td>
<td>destination &lt; source</td>
</tr>
<tr class="odd">
<td>0</td>
<td>1</td>
<td>0</td>
<td>destination &lt; source</td>
</tr>
<tr class="even">
<td>0</td>
<td>1</td>
<td>1</td>
<td>destination &gt; source</td>
</tr>
<tr class="odd">
<td>1</td>
<td>*</td>
<td>*</td>
<td>destination = source</td>
</tr>
</tbody>
</table></li>
</ul></li>
<li><p><code>CMP</code> is a valuable tool for creating conditional logic structures. When you follow CMP with a conditional jump instruction, the result is the assembly language equivalent of a flow control statement (such as <code>if</code>, <code>if else</code>, <code>switch case</code>, <code>while</code>, <code>do while</code>).</p></li>
<li><p>Example:</p>
<div class="sourceCode" id="cb14" data-code-line-numbers=""><pre class="sourceCode nasm code-with-copy"><code class="sourceCode nasm"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>      <span class="kw">mov</span>   <span class="kw">ax</span><span class="op">,</span> <span class="dv">100</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>      <span class="kw">mov</span>   <span class="kw">cx</span><span class="op">,</span> <span class="dv">100</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>      <span class="kw">cmp</span>   <span class="kw">ax</span><span class="op">,</span> <span class="kw">cx</span>    <span class="co">; ZF = 1</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>      <span class="cf">jz</span>    skip      <span class="co">; JUMP to label "skip" only if ZF is set</span></span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>      <span class="kw">add</span>   <span class="kw">ax</span><span class="op">,</span> <span class="dv">1</span></span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a><span class="fu">skip:</span></span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a>      <span class="kw">add</span>   <span class="kw">cx</span><span class="op">,</span> <span class="dv">2</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
<li><p>The flow control of the previous code is shown below:</p>
<p><img src="..\images/jumpifzero.png" class="img-fluid" width="284"></p></li>
</ul>
</section>
<section id="jcc-instruction-conditional-jump" class="level3">
<h3 class="anchored" data-anchor-id="jcc-instruction-conditional-jump"><code>Jcc</code> Instruction (Conditional Jump)</h3>
<div class="callout callout-style-simple callout-important no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Syntax
</div>
</div>
<div class="callout-body-container callout-body">
<div class="sourceCode" id="cb15" data-code-line-numbers=""><pre class="sourceCode nasm code-with-copy"><code class="sourceCode nasm"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>        Jcc   <span class="op">&lt;</span>destination<span class="op">&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<ul>
<li><p>The <code>Jcc</code> instruction causes a <strong><em>conditional transfer</em></strong> to a destination address, which can be specified relatively or absolutely.</p></li>
<li><p>The <code>Jcc</code> instruction supports near jump only.</p></li>
<li><p>A conditional jump instruction <strong><em>branches</em></strong> to a destination label when a condition is true. Otherwise, if the condition is false, the instruction immediately following the conditional jump is executed.</p>
<div class="grid">
<div class="g-col-6">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="..\images/backward.png" class="img-fluid figure-img" style="width:60.0%"></p>
<figcaption>Backward Reference</figcaption>
</figure>
</div>
</div>
<div class="g-col-6">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="..\images/forward.png" class="img-fluid figure-img" style="width:60.0%"></p>
<figcaption>Forward Reference</figcaption>
</figure>
</div>
</div>
</div></li>
</ul>
<section id="types-of-conditional-jump" class="level4">
<h4 class="anchored" data-anchor-id="types-of-conditional-jump">Types of Conditional Jump</h4>
<ul>
<li><p>The x86 instruction set has a large number of conditional jump instructions. They are able to compare signed and unsigned integers and perform actions based on the values of individual CPU flags.</p></li>
<li><p>The conditional jump instructions can be divided into four groups:</p>
<ol type="1">
<li><p>Jumps based on specific flag values</p></li>
<li><p>Jumps based on equality between operands or the value of RCX, ECX, or CX</p></li>
<li><p>Jumps based on comparisons of unsigned operands</p></li>
<li><p>Jumps based on comparisons of signed operands</p></li>
</ol></li>
</ul>
</section>
<section id="jump-based-on-specific-flag-values" class="level4">
<h4 class="anchored" data-anchor-id="jump-based-on-specific-flag-values">Jump Based on Specific Flag Values</h4>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Mnemonic</th>
<th>Description</th>
<th>Flags/Registers</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>JZ</code></td>
<td>Jump if zero</td>
<td>ZF = 1</td>
</tr>
<tr class="even">
<td><code>JNZ</code></td>
<td>Jump if not zero</td>
<td>ZF = 0</td>
</tr>
<tr class="odd">
<td><code>JC</code></td>
<td>Jump if carry</td>
<td>CF = 1</td>
</tr>
<tr class="even">
<td><code>JNC</code></td>
<td>Jump if not carry</td>
<td>CF = 0</td>
</tr>
<tr class="odd">
<td><code>JO</code></td>
<td>Jump if overflow</td>
<td>OF = 1</td>
</tr>
<tr class="even">
<td><code>JNO</code></td>
<td>Jump if not overflow</td>
<td>OF = 0</td>
</tr>
<tr class="odd">
<td><code>JS</code></td>
<td>Jump if signed</td>
<td>SF = 1</td>
</tr>
<tr class="even">
<td><code>JNS</code></td>
<td>Jump if not signed</td>
<td>SF = 0</td>
</tr>
<tr class="odd">
<td><code>JP</code> or <code>JPE</code></td>
<td>Jump if parity (even)</td>
<td>PF = 1</td>
</tr>
<tr class="even">
<td><code>JNP</code> or <code>JPO</code></td>
<td>Jump if not parity (odd)</td>
<td>PF = 0</td>
</tr>
</tbody>
</table>
</section>
<section id="jump-based-on-equality-or-the-value-of-cxecxrcx" class="level4">
<h4 class="anchored" data-anchor-id="jump-based-on-equality-or-the-value-of-cxecxrcx">Jump Based on Equality or The Value of CX/ECX/RCX</h4>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Mnemonic</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>JE</code></td>
<td>Jump if equal</td>
</tr>
<tr class="even">
<td><code>JNE</code></td>
<td>Jump if not equal</td>
</tr>
<tr class="odd">
<td><code>JCXZ</code></td>
<td>Jump if CX = 0</td>
</tr>
<tr class="even">
<td><code>JECXZ</code></td>
<td>Jump if ECX = 0</td>
</tr>
<tr class="odd">
<td><code>JRCXZ</code></td>
<td>Jump if RCX = 0 (64-bit mode)</td>
</tr>
</tbody>
</table>
</section>
<section id="jump-based-on-comparisons-of-unsigned-operands" class="level4">
<h4 class="anchored" data-anchor-id="jump-based-on-comparisons-of-unsigned-operands">Jump Based on Comparisons of Unsigned Operands</h4>
<table class="caption-top table">
<colgroup>
<col style="width: 14%">
<col style="width: 58%">
<col style="width: 27%">
</colgroup>
<thead>
<tr class="header">
<th>Mnemonic</th>
<th>Description</th>
<th>Flags</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>JA</code></td>
<td>Jump if above</td>
<td>CF = 0 and ZF = 0</td>
</tr>
<tr class="even">
<td><code>JNBE</code></td>
<td>Jump if not below of equal (same as JA)</td>
<td>CF = 0 and ZF = 0</td>
</tr>
<tr class="odd">
<td><code>JAE</code></td>
<td>Jump if above or equal</td>
<td>CF = 0</td>
</tr>
<tr class="even">
<td><code>JNB</code></td>
<td>Jump if not below (same as JAE)</td>
<td>CF = 0</td>
</tr>
<tr class="odd">
<td><code>JB</code></td>
<td>Jump if below</td>
<td>CF = 1 and ZF = 0</td>
</tr>
<tr class="even">
<td><code>JNAE</code></td>
<td>Jump if not above or equal (same as JB)</td>
<td>CF = 1 and ZF = 0</td>
</tr>
<tr class="odd">
<td><code>JBE</code></td>
<td>Jump if below of equal</td>
<td>CF = 1 or ZF = 1</td>
</tr>
<tr class="even">
<td><code>JNA</code></td>
<td>Jump if not above (same as JBE)</td>
<td>CF = 1 or ZF = 1</td>
</tr>
</tbody>
</table>
</section>
<section id="jump-based-on-comparisons-of-signed-operands" class="level4">
<h4 class="anchored" data-anchor-id="jump-based-on-comparisons-of-signed-operands">Jump Based on Comparisons of Signed Operands</h4>
<table class="caption-top table">
<colgroup>
<col style="width: 14%">
<col style="width: 60%">
<col style="width: 25%">
</colgroup>
<thead>
<tr class="header">
<th>Mnemonic</th>
<th>Description</th>
<th>Flags</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>JG</code></td>
<td>Jump if greater</td>
<td>ZF=0, SF=OF</td>
</tr>
<tr class="even">
<td><code>JNLE</code></td>
<td>Jump if not less or equal (same as JG)</td>
<td>ZF=0, SF=OF</td>
</tr>
<tr class="odd">
<td><code>JGE</code></td>
<td>Jump if greater or equal</td>
<td>SF=OF</td>
</tr>
<tr class="even">
<td><code>JNL</code></td>
<td>Jump if not less (same as JGE)</td>
<td>SF=OF</td>
</tr>
<tr class="odd">
<td><code>JL</code></td>
<td>Jump if less</td>
<td>SF != OF</td>
</tr>
<tr class="even">
<td><code>JNGE</code></td>
<td>Jump if not greater or equal (same as JL)</td>
<td>SF != OF</td>
</tr>
<tr class="odd">
<td><code>JLE</code></td>
<td>Jump if less or equal</td>
<td>ZF=1 or SF != OF</td>
</tr>
<tr class="even">
<td><code>JNG</code></td>
<td>Jump if not greater (same as JLE)</td>
<td>ZF=1 or SF != OF</td>
</tr>
</tbody>
</table>
</section>
<section id="affected-flags" class="level4">
<h4 class="anchored" data-anchor-id="affected-flags">Affected Flags</h4>
<ul>
<li>No conditional jump instruction changes any flag value.</li>
</ul>
</section>
<section id="examples" class="level4">
<h4 class="anchored" data-anchor-id="examples">Examples</h4>
<div id="exm-21" class="theorem example">
<p><span class="theorem-title"><strong>Example 3</strong></span> &nbsp;</p>
<div class="sourceCode" id="cb16" data-code-line-numbers=""><pre class="sourceCode nasm code-with-copy"><code class="sourceCode nasm"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>      <span class="kw">mov</span>   <span class="kw">edx</span><span class="op">,</span> <span class="op">-</span><span class="dv">1</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>      <span class="kw">cmp</span>   <span class="kw">edx</span><span class="op">,</span> <span class="dv">0</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>      <span class="cf">jnl</span>   L5      <span class="co">; jump if EDX .nl. 0 (false) =&gt; no jump</span></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>      <span class="cf">jnle</span>  L5      <span class="co">; jump if EDX .nle. 0 (false) =&gt; no jump</span></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>      <span class="cf">jl</span>    L1      <span class="co">; jump if EDX &lt; 0 (true) =&gt; jump to L1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="exm-22" class="theorem example">
<p><span class="theorem-title"><strong>Example 4</strong></span> &nbsp;</p>
<div class="sourceCode" id="cb17" data-code-line-numbers=""><pre class="sourceCode nasm code-with-copy"><code class="sourceCode nasm"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>      <span class="kw">mov</span>   <span class="kw">bx</span><span class="op">,</span> <span class="dv">35</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>      <span class="kw">cmp</span>   <span class="kw">bx</span><span class="op">,</span> <span class="dv">32</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>      <span class="cf">jb</span>    L4      <span class="co">; jump if BX &lt; 32 (false) =&gt; no jump</span></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>      <span class="cf">jbe</span>   L4      <span class="co">; jump if BX &lt;= 32 (false) =&gt; no jump</span></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>      <span class="cf">jae</span>   L3      <span class="co">; jump if BX &gt;= 32 (true) =&gt; jump to L3</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="exm-23" class="theorem example">
<p><span class="theorem-title"><strong>Example 5</strong></span> &nbsp;</p>
<div class="sourceCode" id="cb18" data-code-line-numbers=""><pre class="sourceCode nasm code-with-copy"><code class="sourceCode nasm"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>      <span class="co">; repeat 10 times</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>      <span class="kw">mov</span>   <span class="kw">ecx</span><span class="op">,</span> <span class="dv">0</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a><span class="fu">top:</span></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>      <span class="co">; loop statement</span></span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>      <span class="kw">inc</span>   <span class="kw">ecx</span></span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a>      <span class="kw">cmp</span>   <span class="kw">ecx</span><span class="op">,</span> <span class="dv">10</span></span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a>      <span class="cf">jb</span>    top       <span class="co">; jump if ECX &lt; 10</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
</section>
<section id="implementing-high-level-flow-structures" class="level2">
<h2 class="anchored" data-anchor-id="implementing-high-level-flow-structures">Implementing High-Level Flow Structures</h2>
<p>In this section, you will learn how to translate:</p>
<ul>
<li><p>if statement</p></li>
<li><p>if-else statement</p></li>
<li><p>switch statement</p></li>
<li><p>for loop</p></li>
<li><p>while loop</p></li>
<li><p>do while loop</p></li>
</ul>
<p>into assembly language.</p>
<section id="implementing-if-statements" class="level3">
<h3 class="anchored" data-anchor-id="implementing-if-statements">Implementing IF statements</h3>
<div id="exm-30" class="theorem example">
<p><span class="theorem-title"><strong>Example 6</strong></span> Translate the following <code>if</code> statement into assembly language. Assume the variable <code>x</code> is <code>unsigned int</code>.</p>
<div class="sourceCode" id="cb19" data-code-line-numbers=""><pre class="sourceCode cpp code-with-copy"><code class="sourceCode cpp"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="op">(</span>x <span class="op">&gt;</span> <span class="dv">2000</span><span class="op">)</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>  x <span class="op">=</span> x<span class="op">/</span><span class="dv">2</span><span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><em>Solution:</em></p>
<div class="sourceCode" id="cb20" data-code-line-numbers=""><pre class="sourceCode nasm code-with-copy"><code class="sourceCode nasm"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>    <span class="kw">mov</span>   <span class="kw">eax</span><span class="op">,</span> <span class="op">[</span>x<span class="op">]</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">cmp</span>   <span class="kw">eax</span><span class="op">,</span> <span class="dv">2000</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">jbe</span>   ENDIF</span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">mov</span>   <span class="kw">edx</span><span class="op">,</span> <span class="dv">0</span></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>    <span class="kw">mov</span>   <span class="kw">ebx</span><span class="op">,</span> <span class="dv">2</span></span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>    <span class="kw">div</span>   <span class="kw">ebx</span></span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>    <span class="kw">mov</span>   <span class="op">[</span>x<span class="op">],</span> <span class="kw">eax</span></span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a><span class="fu">ENDIF:</span></span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a>      </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div id="exm-31" class="theorem example">
<p><span class="theorem-title"><strong>Example 7</strong></span> Let us translate the following <code>if</code> statement, assuming the variables are declared as <code>int</code>:</p>
<div class="sourceCode" id="cb21" data-code-line-numbers=""><pre class="sourceCode cpp code-with-copy"><code class="sourceCode cpp"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="op">(</span>value <span class="op">&lt;</span> <span class="dv">10</span><span class="op">)</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>  smallCount<span class="op">++;</span></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a><span class="cf">else</span></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>  largeCount<span class="op">++;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><em>Solution</em>:</p>
<div class="sourceCode" id="cb22" data-code-line-numbers=""><pre class="sourceCode nasm code-with-copy"><code class="sourceCode nasm"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>    <span class="kw">mov</span>   <span class="kw">eax</span><span class="op">,</span> <span class="op">[</span>value<span class="op">]</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">cmp</span>   <span class="kw">eax</span><span class="op">,</span> <span class="dv">10</span></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">jnl</span>   ELSE</span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>    <span class="kw">inc</span>   <span class="dt">DWORD</span> <span class="op">[</span>smallCount<span class="op">]</span></span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">jmp</span>   ENDIF</span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a><span class="fu">ELSE:</span></span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a>    <span class="kw">inc</span>   <span class="dt">DWORD</span> <span class="op">[</span>largeCount<span class="op">]</span></span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a><span class="fu">ENDIF:</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div id="exm-32" class="theorem example">
<p><span class="theorem-title"><strong>Example 8</strong></span> Translate the following statement (all variables are declared as <code>int</code>):</p>
<div class="sourceCode" id="cb23" data-code-line-numbers=""><pre class="sourceCode cpp code-with-copy"><code class="sourceCode cpp"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="op">(</span> <span class="op">(</span>total <span class="op">&gt;=</span> <span class="dv">100</span><span class="op">)</span> <span class="kw">and</span> <span class="op">(</span>count <span class="op">=</span> <span class="dv">10</span><span class="op">)</span> <span class="op">)</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>  total <span class="op">+=</span> value<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><em>Solution</em>:</p>
<div class="sourceCode" id="cb24" data-code-line-numbers=""><pre class="sourceCode nasm code-with-copy"><code class="sourceCode nasm"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>    <span class="kw">mov</span>   <span class="kw">eax</span><span class="op">,</span> <span class="op">[</span>total<span class="op">]</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">cmp</span>   <span class="kw">eax</span><span class="op">,</span> <span class="dv">100</span></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">jl</span>    ENDIF</span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">cmp</span>   <span class="dt">DWORD</span> <span class="op">[</span>count<span class="op">],</span> <span class="dv">10</span></span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>    jnq   ENDIF</span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a>    <span class="kw">add</span>   <span class="kw">eax</span><span class="op">,</span> <span class="op">[</span>value<span class="op">]</span></span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a>    <span class="kw">mov</span>   <span class="op">[</span>total<span class="op">],</span> <span class="kw">eax</span></span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a><span class="fu">ENDIF:</span></span>
<span id="cb24-10"><a href="#cb24-10" aria-hidden="true" tabindex="-1"></a>    </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div id="exm-33" class="theorem example">
<p><span class="theorem-title"><strong>Example 9</strong></span> Translate the following statement (all variables are declared as <code>int</code>):</p>
<div class="sourceCode" id="cb25" data-code-line-numbers=""><pre class="sourceCode cpp code-with-copy"><code class="sourceCode cpp"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="op">(</span> <span class="op">(</span>total <span class="op">&gt;=</span> <span class="dv">100</span><span class="op">)</span> <span class="kw">or</span> <span class="op">(</span>count <span class="op">=</span> <span class="dv">10</span><span class="op">)</span> <span class="op">)</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>  total <span class="op">+=</span> value<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><em>Solution</em>:</p>
<div class="sourceCode" id="cb26" data-code-line-numbers=""><pre class="sourceCode nasm code-with-copy"><code class="sourceCode nasm"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>    <span class="kw">mov</span>   <span class="kw">eax</span><span class="op">,</span> <span class="op">[</span>total<span class="op">]</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">cmp</span>   <span class="kw">eax</span><span class="op">,</span> <span class="dv">100</span></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">jge</span>   THEN</span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">cmp</span>   <span class="dt">DWORD</span> <span class="op">[</span>count<span class="op">],</span> <span class="dv">10</span></span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>    jnq   ENDIF</span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a><span class="fu">THEN:</span></span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a>    <span class="kw">add</span>   <span class="kw">eax</span><span class="op">,</span> <span class="op">[</span>value<span class="op">]</span></span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a>    <span class="kw">mov</span>   <span class="op">[</span>total<span class="op">,</span> <span class="kw">eax</span><span class="op">]</span></span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true" tabindex="-1"></a><span class="fu">ENDIF:</span></span>
<span id="cb26-10"><a href="#cb26-10" aria-hidden="true" tabindex="-1"></a>    </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div id="exm-34" class="theorem example">
<p><span class="theorem-title"><strong>Example 10</strong></span> Find the smallest of three integers:</p>
<div class="sourceCode" id="cb27" data-code-line-numbers=""><pre class="sourceCode cpp code-with-copy"><code class="sourceCode cpp"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="op">(</span>a <span class="op">&lt;=</span> b <span class="kw">and</span> a <span class="op">&lt;=</span> c<span class="op">)</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>  smallest <span class="op">=</span> a<span class="op">;</span></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a><span class="cf">else</span> <span class="cf">if</span> <span class="op">(</span>b <span class="op">&lt;=</span> c<span class="op">)</span></span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>  smallest <span class="op">=</span> b<span class="op">;</span></span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a><span class="cf">else</span></span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a>  smallest <span class="op">=</span> c<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><em>Solution</em>:</p>
<div class="sourceCode" id="cb28" data-code-line-numbers=""><pre class="sourceCode nasm code-with-copy"><code class="sourceCode nasm"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>    <span class="kw">mov</span>   <span class="kw">eax</span><span class="op">,</span> <span class="op">[</span>a<span class="op">]</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">mov</span>   <span class="kw">ebx</span><span class="op">,</span> <span class="op">[</span>b<span class="op">]</span></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>    <span class="kw">mov</span>   <span class="kw">ecx</span><span class="op">,</span> <span class="op">[</span>c<span class="op">]</span></span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">cmp</span>   <span class="kw">eax</span><span class="op">,</span> <span class="kw">ebx</span></span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">jg</span>    ELSE1</span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a>    <span class="kw">cmp</span>   <span class="kw">eax</span><span class="op">,</span> <span class="kw">ecx</span></span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">jg</span>    ELSE1</span>
<span id="cb28-8"><a href="#cb28-8" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb28-9"><a href="#cb28-9" aria-hidden="true" tabindex="-1"></a>    <span class="kw">mov</span>   <span class="op">[</span>smallest<span class="op">],</span> <span class="kw">eax</span></span>
<span id="cb28-10"><a href="#cb28-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">jmp</span>   ENDIF</span>
<span id="cb28-11"><a href="#cb28-11" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb28-12"><a href="#cb28-12" aria-hidden="true" tabindex="-1"></a><span class="fu">ELSE1:</span></span>
<span id="cb28-13"><a href="#cb28-13" aria-hidden="true" tabindex="-1"></a>    <span class="kw">cmp</span>   <span class="kw">ebx</span><span class="op">,</span> <span class="kw">ecx</span></span>
<span id="cb28-14"><a href="#cb28-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">jg</span>    ELSE2</span>
<span id="cb28-15"><a href="#cb28-15" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb28-16"><a href="#cb28-16" aria-hidden="true" tabindex="-1"></a>    <span class="kw">mov</span>   <span class="op">[</span>smallest<span class="op">],</span> <span class="kw">ebx</span></span>
<span id="cb28-17"><a href="#cb28-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">jmp</span>   ENDIF</span>
<span id="cb28-18"><a href="#cb28-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-19"><a href="#cb28-19" aria-hidden="true" tabindex="-1"></a><span class="fu">ELSE2:</span></span>
<span id="cb28-20"><a href="#cb28-20" aria-hidden="true" tabindex="-1"></a>    <span class="kw">mov</span>   <span class="op">[</span>smallest<span class="op">],</span> <span class="kw">ecx</span></span>
<span id="cb28-21"><a href="#cb28-21" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb28-22"><a href="#cb28-22" aria-hidden="true" tabindex="-1"></a><span class="fu">ENDIF:</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div id="exm-35" class="theorem example">
<p><span class="theorem-title"><strong>Example 11</strong></span> Translate the following <code>switch</code> statement:</p>
<div class="sourceCode" id="cb29" data-code-line-numbers=""><pre class="sourceCode cpp code-with-copy"><code class="sourceCode cpp"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="cf">switch</span> <span class="op">(</span>x<span class="op">)</span> <span class="op">{</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a><span class="cf">case</span> <span class="dv">0</span><span class="op">:</span></span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>  y <span class="op">=</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>  <span class="cf">break</span><span class="op">;</span></span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a><span class="cf">case</span> <span class="dv">2</span><span class="op">:</span></span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a>  y <span class="op">=</span> <span class="dv">10</span><span class="op">;</span></span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a>  <span class="cf">break</span><span class="op">;</span></span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a><span class="cf">case</span> <span class="dv">4</span><span class="op">:</span></span>
<span id="cb29-9"><a href="#cb29-9" aria-hidden="true" tabindex="-1"></a>  y <span class="op">=</span> <span class="dv">100</span><span class="op">;</span></span>
<span id="cb29-10"><a href="#cb29-10" aria-hidden="true" tabindex="-1"></a>  <span class="cf">break</span><span class="op">;</span></span>
<span id="cb29-11"><a href="#cb29-11" aria-hidden="true" tabindex="-1"></a><span class="cf">default</span><span class="op">:</span></span>
<span id="cb29-12"><a href="#cb29-12" aria-hidden="true" tabindex="-1"></a>  y <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb29-13"><a href="#cb29-13" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><em>Solution</em>:</p>
<div class="sourceCode" id="cb30" data-code-line-numbers=""><pre class="sourceCode nasm code-with-copy"><code class="sourceCode nasm"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>      <span class="kw">mov</span>   <span class="kw">eax</span><span class="op">,</span> <span class="op">[</span>x<span class="op">]</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>      <span class="kw">cmp</span>   <span class="kw">eax</span><span class="op">,</span> <span class="dv">0</span></span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>      jnq   CASE2</span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a>      <span class="kw">mov</span>   <span class="kw">ebx</span><span class="op">,</span> <span class="dv">1</span></span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a>      <span class="cf">jmp</span>   ENDCASE</span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a><span class="fu">CASE2:</span></span>
<span id="cb30-8"><a href="#cb30-8" aria-hidden="true" tabindex="-1"></a>      <span class="kw">cmp</span>   <span class="kw">eax</span><span class="op">,</span> <span class="dv">2</span></span>
<span id="cb30-9"><a href="#cb30-9" aria-hidden="true" tabindex="-1"></a>      jnq   CASE3</span>
<span id="cb30-10"><a href="#cb30-10" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb30-11"><a href="#cb30-11" aria-hidden="true" tabindex="-1"></a>      <span class="kw">mov</span>   <span class="kw">ebx</span><span class="op">,</span> <span class="dv">10</span></span>
<span id="cb30-12"><a href="#cb30-12" aria-hidden="true" tabindex="-1"></a>      <span class="cf">jmp</span>   ENDCASE</span>
<span id="cb30-13"><a href="#cb30-13" aria-hidden="true" tabindex="-1"></a><span class="fu">CASE3:</span></span>
<span id="cb30-14"><a href="#cb30-14" aria-hidden="true" tabindex="-1"></a>      <span class="kw">cmp</span>   <span class="kw">eax</span><span class="op">,</span> <span class="dv">4</span></span>
<span id="cb30-15"><a href="#cb30-15" aria-hidden="true" tabindex="-1"></a>      jnq   CASE4</span>
<span id="cb30-16"><a href="#cb30-16" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb30-17"><a href="#cb30-17" aria-hidden="true" tabindex="-1"></a>      <span class="kw">mov</span>   <span class="kw">ebx</span><span class="op">,</span> <span class="dv">100</span></span>
<span id="cb30-18"><a href="#cb30-18" aria-hidden="true" tabindex="-1"></a>      <span class="cf">jmp</span>   ENDCASE</span>
<span id="cb30-19"><a href="#cb30-19" aria-hidden="true" tabindex="-1"></a><span class="fu">CASE4:</span></span>
<span id="cb30-20"><a href="#cb30-20" aria-hidden="true" tabindex="-1"></a>      <span class="kw">mov</span>   <span class="kw">ebx</span><span class="op">,</span> <span class="dv">0</span></span>
<span id="cb30-21"><a href="#cb30-21" aria-hidden="true" tabindex="-1"></a><span class="fu">ENDCASE:</span></span>
<span id="cb30-22"><a href="#cb30-22" aria-hidden="true" tabindex="-1"></a>      <span class="kw">mov</span>   <span class="op">[</span>y<span class="op">],</span> <span class="kw">ebx</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div id="exm-36" class="theorem example">
<p><span class="theorem-title"><strong>Example 12</strong></span> Translate the following <code>for</code> loop:</p>
<div class="sourceCode" id="cb31" data-code-line-numbers=""><pre class="sourceCode cpp code-with-copy"><code class="sourceCode cpp"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>sum <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i<span class="op">=</span><span class="dv">1</span><span class="op">;</span> i<span class="op">&lt;</span><span class="dv">100</span><span class="op">;</span> i<span class="op">+=</span><span class="dv">2</span><span class="op">)</span></span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>  sum <span class="op">+=</span> i<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><em>Solution</em>:</p>
<div class="sourceCode" id="cb32" data-code-line-numbers=""><pre class="sourceCode nasm code-with-copy"><code class="sourceCode nasm"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>    <span class="kw">mov</span>   <span class="kw">eax</span><span class="op">,</span> <span class="dv">0</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">mov</span>   <span class="kw">ecx</span><span class="op">,</span> <span class="dv">1</span></span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a><span class="fu">top:</span></span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">add</span>   <span class="kw">eax</span><span class="op">,</span> <span class="kw">ecx</span></span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a>    <span class="kw">add</span>   <span class="kw">ecx</span><span class="op">,</span> <span class="dv">2</span></span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a>    <span class="kw">cmp</span>   <span class="kw">ecx</span><span class="op">,</span> <span class="dv">100</span></span>
<span id="cb32-7"><a href="#cb32-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">jl</span>    top</span>
<span id="cb32-8"><a href="#cb32-8" aria-hidden="true" tabindex="-1"></a>    <span class="kw">mov</span>   <span class="op">[</span>sum<span class="op">],</span> <span class="kw">eax</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div id="exm-37" class="theorem example">
<p><span class="theorem-title"><strong>Example 13</strong></span> Translate the following <code>while</code> loop:</p>
<div class="sourceCode" id="cb33" data-code-line-numbers=""><pre class="sourceCode cpp code-with-copy"><code class="sourceCode cpp"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>d1 <span class="op">=</span> <span class="dv">100</span><span class="op">;</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>d2 <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>t <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a><span class="cf">while</span> <span class="op">(</span>d2 <span class="op">&lt;=</span> d1<span class="op">)</span> <span class="op">{</span></span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a>  t <span class="op">=</span> t <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a>  d1 <span class="op">=</span> d1 <span class="op">-</span> <span class="dv">3</span><span class="op">;</span></span>
<span id="cb33-7"><a href="#cb33-7" aria-hidden="true" tabindex="-1"></a>  d2 <span class="op">=</span> <span class="dv">2</span><span class="op">*</span>t <span class="op">-</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb33-8"><a href="#cb33-8" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><em>Solution</em>:</p>
<div class="sourceCode" id="cb34" data-code-line-numbers=""><pre class="sourceCode nasm code-with-copy"><code class="sourceCode nasm"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>    <span class="kw">mov</span>   <span class="kw">eax</span><span class="op">,</span> <span class="dv">100</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">mov</span>   <span class="kw">ebx</span><span class="op">,</span> <span class="dv">0</span></span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>    <span class="kw">mov</span>   <span class="kw">ecx</span><span class="op">,</span> <span class="dv">0</span><span class="co">;</span></span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a><span class="fu">WHILE:</span></span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a>    <span class="kw">cmp</span>   <span class="kw">ebx</span><span class="op">,</span> <span class="kw">eax</span></span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">jg</span>    ENDWHILE</span>
<span id="cb34-7"><a href="#cb34-7" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb34-8"><a href="#cb34-8" aria-hidden="true" tabindex="-1"></a>    <span class="kw">inc</span>   <span class="kw">ecx</span></span>
<span id="cb34-9"><a href="#cb34-9" aria-hidden="true" tabindex="-1"></a>    <span class="kw">sub</span>   <span class="kw">eax</span><span class="op">,</span> <span class="dv">3</span></span>
<span id="cb34-10"><a href="#cb34-10" aria-hidden="true" tabindex="-1"></a>    <span class="kw">imul</span>  <span class="kw">ebx</span><span class="op">,</span> <span class="kw">ecx</span><span class="op">,</span> <span class="dv">2</span></span>
<span id="cb34-11"><a href="#cb34-11" aria-hidden="true" tabindex="-1"></a>    <span class="kw">sub</span>   <span class="kw">ebx</span><span class="op">,</span> <span class="dv">1</span></span>
<span id="cb34-12"><a href="#cb34-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">jmp</span>   WHILE</span>
<span id="cb34-13"><a href="#cb34-13" aria-hidden="true" tabindex="-1"></a>ENDWHILE</span>
<span id="cb34-14"><a href="#cb34-14" aria-hidden="true" tabindex="-1"></a>    <span class="kw">mov</span>   <span class="op">[</span>d1<span class="op">],</span> <span class="kw">eax</span></span>
<span id="cb34-15"><a href="#cb34-15" aria-hidden="true" tabindex="-1"></a>    <span class="kw">mov</span>   <span class="op">[</span>d2<span class="op">],</span> <span class="kw">ebx</span></span>
<span id="cb34-16"><a href="#cb34-16" aria-hidden="true" tabindex="-1"></a>    <span class="kw">mov</span>   <span class="op">[</span>t<span class="op">],</span> <span class="kw">ecx</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div id="exm-38" class="theorem example">
<p><span class="theorem-title"><strong>Example 14</strong></span> Translate the following <code>do while</code> loop:</p>
<div class="sourceCode" id="cb35" data-code-line-numbers=""><pre class="sourceCode cpp code-with-copy"><code class="sourceCode cpp"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>count <span class="op">=</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>sum <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a><span class="cf">do</span> <span class="op">{</span></span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a>  sum <span class="op">=</span> sum <span class="op">/</span> <span class="dv">2</span> <span class="op">+</span> count <span class="op">*</span> <span class="dv">2</span></span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a>  count<span class="op">++;</span></span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a><span class="op">}</span> <span class="cf">while</span> <span class="op">(</span>sum <span class="op">&lt;</span> <span class="dv">1000</span> <span class="kw">or</span> count <span class="op">&lt;=</span> <span class="dv">100</span><span class="op">);</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><em>Solution</em>:</p>
<div class="sourceCode" id="cb36" data-code-line-numbers=""><pre class="sourceCode nasm code-with-copy"><code class="sourceCode nasm"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>    <span class="kw">mov</span>   <span class="kw">ecx</span><span class="op">,</span> <span class="dv">1</span><span class="co">;</span></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">mov</span>   <span class="kw">eax</span><span class="op">,</span> <span class="dv">0</span></span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a><span class="fu">DOWHILE:</span></span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">cdq</span></span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a>    <span class="kw">mov</span>   <span class="kw">ebx</span><span class="op">,</span> <span class="dv">2</span></span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a>    <span class="kw">idiv</span>  <span class="kw">ebx</span></span>
<span id="cb36-7"><a href="#cb36-7" aria-hidden="true" tabindex="-1"></a>    <span class="kw">add</span>   <span class="kw">eax</span><span class="op">,</span> <span class="kw">ecx</span></span>
<span id="cb36-8"><a href="#cb36-8" aria-hidden="true" tabindex="-1"></a>    <span class="kw">add</span>   <span class="kw">eax</span><span class="op">,</span> <span class="kw">ecx</span></span>
<span id="cb36-9"><a href="#cb36-9" aria-hidden="true" tabindex="-1"></a>    <span class="kw">inc</span>   <span class="kw">ecx</span></span>
<span id="cb36-10"><a href="#cb36-10" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb36-11"><a href="#cb36-11" aria-hidden="true" tabindex="-1"></a>    <span class="kw">cmp</span>   <span class="kw">eax</span><span class="op">,</span> <span class="dv">1000</span></span>
<span id="cb36-12"><a href="#cb36-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">jl</span>    DOWHILE</span>
<span id="cb36-13"><a href="#cb36-13" aria-hidden="true" tabindex="-1"></a>    <span class="kw">cmp</span>   <span class="kw">ecx</span><span class="op">,</span> <span class="dv">100</span></span>
<span id="cb36-14"><a href="#cb36-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">jle</span>   DOWHILE</span>
<span id="cb36-15"><a href="#cb36-15" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb36-16"><a href="#cb36-16" aria-hidden="true" tabindex="-1"></a>    <span class="kw">mov</span>   <span class="op">[</span>count<span class="op">],</span> <span class="kw">ecx</span></span>
<span id="cb36-17"><a href="#cb36-17" aria-hidden="true" tabindex="-1"></a>    <span class="kw">mov</span>   <span class="op">[</span>sum<span class="op">],</span> <span class="kw">eax</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "î§‹";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/khalid-elbadawi\.github\.io\/C404\/");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




<script src="../site_libs/quarto-contrib/line-highlight-1.0.0/line-highlight.js" defer="true"></script>
</body></html>