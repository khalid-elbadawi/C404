<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Lecture 3: Binary Arithmetic, Logic and Addressing – C404: Assembly Language</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<link href="../site_libs/quarto-contrib/line-highlight-1.0.0/line-highlight.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="../index.html" class="navbar-brand navbar-brand-logo">
    <img src="../images/fmsi.png" alt="" class="navbar-logo">
    </a>
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">C404: Assembly Language</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-lectures" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Lectures</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-lectures">    
        <li>
    <a class="dropdown-item" href="../lectures/lec01.html">
 <span class="dropdown-text">Lecture 1: Basic Concepts</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../lectures/lec02.html">
 <span class="dropdown-text">Lecture 2: Assembly Language Fundamentals</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../lectures/lec03.html">
 <span class="dropdown-text">Lecture 3: Binary Arithmetic, Logic and Addressing</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-exercises" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Exercises</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-exercises">    
        <li>
    <a class="dropdown-item" href="../exercises/inclass01.html">
 <span class="dropdown-text">Exercise 1</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../exercises/inclass02.html">
 <span class="dropdown-text">Exercise 2</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../exercises/inclass03.html">
 <span class="dropdown-text">Exercise 3</span></a>
  </li>  
    </ul>
  </li>
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
  <div id="quarto-announcement" data-announcement-id="f05b4cca1daa1827a0cc784371537e32" class="alert alert-primary hidden"><i class="bi bi-telegram quarto-announcement-icon"></i><div class="quarto-announcement-content">
<p>Please join the course group at <a href="https://t.me/+PE3cTMyrv5s3OGI0">FMSI-CS404-ASSEMBLY</a>; Telegram Group</p>
</div><i class="bi bi-x-lg quarto-announcement-action"></i></div>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#objectives" id="toc-objectives" class="nav-link active" data-scroll-target="#objectives">Objectives:</a></li>
  <li><a href="#addition-and-subtraction" id="toc-addition-and-subtraction" class="nav-link" data-scroll-target="#addition-and-subtraction">Addition and Subtraction</a>
  <ul class="collapse">
  <li><a href="#inc-and-dec-instructions" id="toc-inc-and-dec-instructions" class="nav-link" data-scroll-target="#inc-and-dec-instructions"><code>INC</code> and <code>DEC</code> Instructions</a></li>
  <li><a href="#add-and-sub-instructions" id="toc-add-and-sub-instructions" class="nav-link" data-scroll-target="#add-and-sub-instructions"><code>ADD</code> and <code>SUB</code> Instructions</a></li>
  <li><a href="#neg-instruction" id="toc-neg-instruction" class="nav-link" data-scroll-target="#neg-instruction"><code>NEG</code> Instruction</a></li>
  <li><a href="#example" id="toc-example" class="nav-link" data-scroll-target="#example">Example</a></li>
  <li><a href="#implementing-arithmetic-expressions" id="toc-implementing-arithmetic-expressions" class="nav-link" data-scroll-target="#implementing-arithmetic-expressions">Implementing Arithmetic Expressions</a></li>
  <li><a href="#flags-affected-by-arithmetic-instructions" id="toc-flags-affected-by-arithmetic-instructions" class="nav-link" data-scroll-target="#flags-affected-by-arithmetic-instructions">Flags Affected by Arithmetic Instructions</a></li>
  <li><a href="#which-instructions-affect-flags" id="toc-which-instructions-affect-flags" class="nav-link" data-scroll-target="#which-instructions-affect-flags">Which Instructions Affect Flags</a></li>
  </ul></li>
  <li><a href="#multiplication-and-division" id="toc-multiplication-and-division" class="nav-link" data-scroll-target="#multiplication-and-division">Multiplication and Division</a>
  <ul class="collapse">
  <li><a href="#terms" id="toc-terms" class="nav-link" data-scroll-target="#terms">Terms</a></li>
  <li><a href="#mul-instruction" id="toc-mul-instruction" class="nav-link" data-scroll-target="#mul-instruction"><code>MUL</code> Instruction</a></li>
  <li><a href="#imul-instruction" id="toc-imul-instruction" class="nav-link" data-scroll-target="#imul-instruction"><code>IMUL</code> Instruction</a></li>
  <li><a href="#div-instruction" id="toc-div-instruction" class="nav-link" data-scroll-target="#div-instruction"><code>DIV</code> Instruction</a></li>
  <li><a href="#idiv-instruction" id="toc-idiv-instruction" class="nav-link" data-scroll-target="#idiv-instruction"><code>IDIV</code> Instruction</a></li>
  </ul></li>
  <li><a href="#logic-instructions" id="toc-logic-instructions" class="nav-link" data-scroll-target="#logic-instructions">Logic Instructions</a>
  <ul class="collapse">
  <li><a href="#implementations" id="toc-implementations" class="nav-link" data-scroll-target="#implementations">Implementations</a></li>
  </ul></li>
  <li><a href="#indirect-addressing-modes" id="toc-indirect-addressing-modes" class="nav-link" data-scroll-target="#indirect-addressing-modes">Indirect Addressing Modes</a>
  <ul class="collapse">
  <li><a href="#displacement-addressing-mode" id="toc-displacement-addressing-mode" class="nav-link" data-scroll-target="#displacement-addressing-mode">Displacement Addressing Mode</a></li>
  <li><a href="#base-addressing-mode" id="toc-base-addressing-mode" class="nav-link" data-scroll-target="#base-addressing-mode">Base Addressing Mode</a></li>
  <li><a href="#base-displacement-addressing-mode" id="toc-base-displacement-addressing-mode" class="nav-link" data-scroll-target="#base-displacement-addressing-mode">Base + Displacement Addressing Mode</a></li>
  <li><a href="#index-addressing-mode" id="toc-index-addressing-mode" class="nav-link" data-scroll-target="#index-addressing-mode">Index Addressing Mode</a></li>
  <li><a href="#base-index-addressing-mode" id="toc-base-index-addressing-mode" class="nav-link" data-scroll-target="#base-index-addressing-mode">Base + Index Addressing Mode</a></li>
  <li><a href="#base-index-displacement-addressing-mode" id="toc-base-index-displacement-addressing-mode" class="nav-link" data-scroll-target="#base-index-displacement-addressing-mode">Base + Index + Displacement Addressing Mode</a></li>
  <li><a href="#summary" id="toc-summary" class="nav-link" data-scroll-target="#summary">Summary</a></li>
  </ul></li>
  </ul>
<div class="quarto-alternate-formats"><h2>Other Formats</h2><ul><li><a href="lec03.pdf"><i class="bi bi-file-pdf"></i>PDF</a></li><li><a href="lec03.epub"><i class="bi bi-file"></i>ePub</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Lecture 3: Binary Arithmetic, Logic and Addressing</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<!-- 
4.2 Addition and Subtraction
7.3 Multiplication and Division
4.4 Indirect Addressing
4.5 JMP and Loop
-->
<section id="objectives" class="level2">
<h2 class="anchored" data-anchor-id="objectives">Objectives:</h2>
<ul>
<li>In this lecture, we focus on <strong><em>binary</em></strong> arithmetic and logic instructions that operate on 8-, 16-, and 32-bit numeric data encoded as signed or unsigned binary integers. The instructions include
<ul>
<li>increment and decrement</li>
<li>addition and subtraction</li>
<li>Multiplication and division</li>
<li>Bitwise Boolean AND, OR, XOR and NOT</li>
</ul></li>
<li>Indirect addressing modes.</li>
</ul>
</section>
<section id="addition-and-subtraction" class="level2">
<h2 class="anchored" data-anchor-id="addition-and-subtraction">Addition and Subtraction</h2>
<section id="inc-and-dec-instructions" class="level3">
<h3 class="anchored" data-anchor-id="inc-and-dec-instructions"><code>INC</code> and <code>DEC</code> Instructions</h3>
<div class="callout callout-style-simple callout-important no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Syntax
</div>
</div>
<div class="callout-body-container callout-body">
<div class="sourceCode" id="cb1" data-code-line-numbers=""><pre class="sourceCode nasm code-with-copy"><code class="sourceCode nasm"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>      <span class="kw">INC</span>     <span class="op">&lt;</span>operand<span class="op">&gt;</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>      <span class="kw">DEC</span>     <span class="op">&lt;</span>operand<span class="op">&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<ul>
<li><p><code>INC</code> (increment) and <code>DEC</code> (decrement) instructions add 1 and subtract 1 from an operand, respectively.</p></li>
<li><p>The operand must be either a memory or register. The format is</p></li>
</ul>
<div class="sourceCode" id="cb2" data-code-line-numbers=""><pre class="sourceCode default code-with-copy"><code class="sourceCode default"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>        inc   reg/mem</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>        dec   reg/mem</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="add-and-sub-instructions" class="level3">
<h3 class="anchored" data-anchor-id="add-and-sub-instructions"><code>ADD</code> and <code>SUB</code> Instructions</h3>
<div class="callout callout-style-simple callout-important no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Syntax
</div>
</div>
<div class="callout-body-container callout-body">
<div class="sourceCode" id="cb3" data-code-line-numbers=""><pre class="sourceCode nasm code-with-copy"><code class="sourceCode nasm"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>      <span class="kw">ADD</span>   <span class="op">&lt;</span>destination<span class="op">&gt;,</span> <span class="op">&lt;</span>source<span class="op">&gt;</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>      <span class="kw">SUB</span>   <span class="op">&lt;</span>destination<span class="op">&gt;,</span> <span class="op">&lt;</span>source<span class="op">&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<ul>
<li><p>The <code>ADD</code> instruction adds a source operand to a destination operand. The sum is stored in the destination operand, and the source operand’s value is unchanged.</p></li>
<li><p>The <code>SUB</code> instruction subtracts a source operand from a destination operand. The result is stored in the destination operand. The source operand’s value is unchanged</p></li>
</ul>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Rules
</div>
</div>
<div class="callout-body-container callout-body">
<ol type="1">
<li>Both operands must be the same size</li>
<li>Both operands cannot be memory operands</li>
<li>The instruction pointer register (EIP, RIP) cannot be a destination operand</li>
</ol>
</div>
</div>
<p>The following operand types are permitted for these instructions (both for ADD and SUB):</p>
<div class="sourceCode" id="cb4" data-code-line-numbers=""><pre class="sourceCode default code-with-copy"><code class="sourceCode default"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>      add   reg, reg</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>      add   reg, mem</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>      add   reg, imm</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>      add   mem, reg</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>      add   mem, imm</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="neg-instruction" class="level3">
<h3 class="anchored" data-anchor-id="neg-instruction"><code>NEG</code> Instruction</h3>
<div class="callout callout-style-simple callout-important no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Syntax
</div>
</div>
<div class="callout-body-container callout-body">
<div class="sourceCode" id="cb5" data-code-line-numbers=""><pre class="sourceCode nasm code-with-copy"><code class="sourceCode nasm"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>      <span class="kw">NEG</span>   <span class="op">&lt;</span>operand<span class="op">&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<ul>
<li><p>The <code>NEG</code> (negate) instruction reverses the sign of an operand by converting the number to its two’s complement. The following operands are permitted:</p>
<div class="sourceCode" id="cb6" data-code-line-numbers=""><pre class="sourceCode default code-with-copy"><code class="sourceCode default"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>      neg   reg/mem</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
<li><p>Intel implements NEG instruction by subtracting the operand from zero (i.e., <code>&lt;operand&gt; = 0 - &lt;operand&gt;</code>)</p></li>
</ul>
</section>
<section id="example" class="level3">
<h3 class="anchored" data-anchor-id="example">Example</h3>
<div class="sourceCode" id="cb7" data-code-line-numbers=""><pre class="sourceCode nasm code-with-copy"><code class="sourceCode nasm"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>        <span class="kw">section</span> <span class="fu">.data</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>var1    <span class="dt">dd</span>      <span class="bn">1000h</span>         <span class="co">; 4096</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>var2    <span class="dt">dd</span>      <span class="bn">2000h</span>         <span class="co">; 8192</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>        <span class="kw">section</span> <span class="fu">.text</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>        <span class="kw">mov</span>     <span class="kw">eax</span><span class="op">,</span> <span class="op">[</span>var1<span class="op">]</span>   <span class="co">; EAX = 1000h</span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>        <span class="kw">inc</span>     <span class="kw">eax</span>           <span class="co">; EAX = 1001h</span></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>        <span class="kw">dec</span>     <span class="dt">DWORD</span> <span class="op">[</span>var2<span class="op">]</span>  <span class="co">; VAR2 = 1FFFh</span></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>        <span class="kw">add</span>     <span class="kw">eax</span><span class="op">,</span> <span class="op">[</span>var2<span class="op">]</span>   <span class="co">; EAX = 1001h + 1FFFh = 3001h</span></span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>        <span class="kw">sub</span>     <span class="op">[</span>var2<span class="op">],</span> <span class="kw">eax</span>   <span class="co">; [VAR2] = 1FFFh - 1001h = 0FFEh</span></span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>        <span class="kw">neg</span>     <span class="op">[</span>var1<span class="op">]</span>        <span class="co">; [VAR1] = FFFF F000h (-4096) </span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="implementing-arithmetic-expressions" class="level3">
<h3 class="anchored" data-anchor-id="implementing-arithmetic-expressions">Implementing Arithmetic Expressions</h3>
<p>In the following examples, we are going to learn how to translate high-level expressions into assembly instructions:</p>
<div id="exm-1" class="theorem example">
<p><span class="theorem-title"><strong>Example 1</strong></span> &nbsp;</p>
<div class="sourceCode" id="cb8" data-code-line-numbers=""><pre class="sourceCode cpp code-with-copy"><code class="sourceCode cpp"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>        b <span class="op">=</span> a<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><em>Solution</em>:</p>
<div class="sourceCode" id="cb9" data-code-line-numbers=""><pre class="sourceCode nasm code-with-copy"><code class="sourceCode nasm"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>        <span class="kw">mov</span>     <span class="kw">eax</span><span class="op">,</span> <span class="op">[</span>a<span class="op">]</span>        <span class="co">; EAX = a</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>        <span class="kw">mov</span>     <span class="op">[</span>b<span class="op">],</span> <span class="kw">eax</span>        <span class="co">; b = EAX</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div id="exm-2" class="theorem example">
<p><span class="theorem-title"><strong>Example 2</strong></span> &nbsp;</p>
<div class="sourceCode" id="cb10" data-code-line-numbers=""><pre class="sourceCode cpp code-with-copy"><code class="sourceCode cpp"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>        b <span class="op">=</span> a <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><em>Solution</em>:</p>
<div class="sourceCode" id="cb11" data-code-line-numbers=""><pre class="sourceCode nasm code-with-copy"><code class="sourceCode nasm"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>        <span class="kw">mov</span>     <span class="kw">eax</span><span class="op">,</span> <span class="op">[</span>a<span class="op">]</span>        <span class="co">; EAX = a</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>        <span class="kw">inc</span>     <span class="kw">eax</span>             <span class="co">; EAX ++</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>        <span class="kw">mov</span>     <span class="op">[</span>b<span class="op">],</span> <span class="kw">eax</span>        <span class="co">; b = EAX</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><em>Another solution</em>:</p>
<div class="sourceCode" id="cb12" data-code-line-numbers=""><pre class="sourceCode nasm code-with-copy"><code class="sourceCode nasm"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>        <span class="kw">mov</span>     <span class="kw">eax</span><span class="op">,</span> <span class="op">[</span>a<span class="op">]</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>        <span class="kw">add</span>     <span class="kw">eax</span><span class="op">,</span> <span class="dv">1</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>        <span class="kw">mov</span>     <span class="op">[</span>b<span class="op">],</span> <span class="kw">eax</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>The following solution is not acceptable because it changes the value of variable <code>a</code>:</p>
<div class="sourceCode" id="cb13" data-code-line-numbers=""><pre class="sourceCode nasm code-with-copy"><code class="sourceCode nasm"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>        <span class="kw">add</span>     <span class="op">[</span>a<span class="op">],</span> <span class="dv">1</span>          <span class="co">; ERROR: don't change the variable a</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>        <span class="kw">mov</span>     <span class="kw">eax</span><span class="op">,</span> <span class="op">[</span>a<span class="op">]</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>        <span class="kw">mov</span>     <span class="op">[</span>b<span class="op">],</span> <span class="kw">eax</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>The following solution has syntax error: memory to memory operands</p>
<div class="sourceCode" id="cb14" data-code-line-numbers=""><pre class="sourceCode nasm code-with-copy"><code class="sourceCode nasm"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>        <span class="kw">mov</span>     <span class="op">[</span>b<span class="op">],</span> <span class="op">[</span>a<span class="op">]</span>        <span class="co">; ERROR: memory to memory operands</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>        <span class="kw">add</span>     <span class="op">[</span>b<span class="op">],</span> <span class="dv">1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div id="exm-3" class="theorem example">
<p><span class="theorem-title"><strong>Example 3</strong></span> &nbsp;</p>
<div class="sourceCode" id="cb15" data-code-line-numbers=""><pre class="sourceCode nasm code-with-copy"><code class="sourceCode nasm"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>      c <span class="op">=</span> b <span class="op">-</span> a<span class="co">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><em>Solution</em>:</p>
<div class="sourceCode" id="cb16" data-code-line-numbers=""><pre class="sourceCode nasm code-with-copy"><code class="sourceCode nasm"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>        <span class="kw">mov</span>     <span class="kw">eax</span><span class="op">,</span> <span class="op">[</span>a<span class="op">]</span>        <span class="co">; EAX = a</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>        <span class="kw">mov</span>     <span class="kw">ebx</span><span class="op">,</span> <span class="op">[</span>b<span class="op">]</span>        <span class="co">; EBX = b</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>        <span class="kw">sub</span>     <span class="kw">ebx</span><span class="op">,</span> <span class="kw">eax</span>        <span class="co">; EBX -= EAX</span></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>        <span class="kw">mov</span>     <span class="op">[</span>c<span class="op">],</span> <span class="kw">ebx</span>        <span class="co">; c = EBX</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><em>Another solution</em>:</p>
<div class="sourceCode" id="cb17" data-code-line-numbers=""><pre class="sourceCode nasm code-with-copy"><code class="sourceCode nasm"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>        <span class="kw">mov</span>     <span class="kw">eax</span><span class="op">,</span> <span class="op">[</span>b<span class="op">]</span>        <span class="co">; EAX = b</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>        <span class="kw">sub</span>     <span class="kw">eax</span><span class="op">,</span> <span class="op">[</span>a<span class="op">]</span>        <span class="co">; EAX = EAX - a</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>        <span class="kw">mov</span>     <span class="op">[</span>c<span class="op">],</span> <span class="kw">eax</span>        <span class="co">; c = EAX</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div id="exm-4" class="theorem example">
<p><span class="theorem-title"><strong>Example 4</strong></span> &nbsp;</p>
<div class="sourceCode" id="cb18" data-code-line-numbers=""><pre class="sourceCode nasm code-with-copy"><code class="sourceCode nasm"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>      y <span class="op">=</span> <span class="dv">5</span> <span class="op">-</span> y<span class="co">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><em>Solution</em>:</p>
<div class="sourceCode" id="cb19" data-code-line-numbers=""><pre class="sourceCode nasm code-with-copy"><code class="sourceCode nasm"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>        <span class="kw">mov</span>     <span class="kw">eax</span><span class="op">,</span> <span class="dv">5</span>          <span class="co">; EAX = 5</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>        <span class="kw">sub</span>     <span class="kw">eax</span><span class="op">,</span> <span class="op">[</span>y<span class="op">]</span>        <span class="co">; EAX = EAX - y</span></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>        <span class="kw">mov</span>     <span class="op">[</span>y<span class="op">],</span> <span class="kw">eax</span>        <span class="co">; y = EAX</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><em>Another solution</em>:</p>
<div class="sourceCode" id="cb20" data-code-line-numbers=""><pre class="sourceCode nasm code-with-copy"><code class="sourceCode nasm"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>        <span class="kw">neg</span>     <span class="op">[</span>y<span class="op">]</span>             <span class="co">; y = -y</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>        <span class="kw">add</span>     <span class="op">[</span>y<span class="op">],</span> <span class="dv">5</span>          <span class="co">; y += 5</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div id="exm-5" class="theorem example">
<p><span class="theorem-title"><strong>Example 5</strong></span> &nbsp;</p>
<div class="sourceCode" id="cb21" data-code-line-numbers=""><pre class="sourceCode cpp code-with-copy"><code class="sourceCode cpp"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>      c <span class="op">=</span> <span class="dv">2</span> <span class="op">*</span> <span class="op">(</span>a <span class="op">+</span> b<span class="op">)</span> <span class="op">+</span> <span class="dv">10</span><span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><em>Solution</em>:</p>
<div class="sourceCode" id="cb22" data-code-line-numbers=""><pre class="sourceCode nasm code-with-copy"><code class="sourceCode nasm"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>        <span class="co">; evaluate (a + b)</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>        <span class="kw">mov</span>     <span class="kw">eax</span><span class="op">,</span> <span class="op">[</span>a<span class="op">]</span></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>        <span class="kw">add</span>     <span class="kw">eax</span><span class="op">,</span> <span class="op">[</span>b<span class="op">]</span></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>        <span class="co">; 2 * (a + b)</span></span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>        <span class="kw">add</span>     <span class="kw">eax</span><span class="op">,</span> <span class="kw">eax</span></span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a>        <span class="co">; 2 * (a + b) + 10</span></span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a>        <span class="kw">add</span>     <span class="kw">eax</span><span class="op">,</span> <span class="dv">10</span></span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb22-11"><a href="#cb22-11" aria-hidden="true" tabindex="-1"></a>        <span class="co">; c = &lt;expr&gt;</span></span>
<span id="cb22-12"><a href="#cb22-12" aria-hidden="true" tabindex="-1"></a>        <span class="kw">mov</span>     <span class="op">[</span>c<span class="op">],</span> <span class="kw">eax</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="flags-affected-by-arithmetic-instructions" class="level3">
<h3 class="anchored" data-anchor-id="flags-affected-by-arithmetic-instructions">Flags Affected by Arithmetic Instructions</h3>
<ul>
<li><p>When a CPU executes arithmetic instructions, it consequently updates the status flags. (see lecture 1)</p></li>
<li><p>Status flags provide information whether the output is</p>
<ul>
<li><p>Positive or negative</p></li>
<li><p>zero or not zero</p></li>
<li><p>too large or too small to fit into the destination operand</p></li>
<li><p>the parity of least significant byte</p></li>
</ul></li>
<li><p><u>The status flags can be used to activate conditional branching instructions</u> (will be discussed in next lecture).</p>
<table class="caption-top table">
<colgroup>
<col style="width: 14%">
<col style="width: 85%">
</colgroup>
<thead>
<tr class="header">
<th>Status Flags</th>
<th>Is set when</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>CF</td>
<td>unsigned integer overflow</td>
</tr>
<tr class="even">
<td>OF</td>
<td>signed integer overflow</td>
</tr>
<tr class="odd">
<td>ZF</td>
<td>the output is zero</td>
</tr>
<tr class="even">
<td>SF</td>
<td>the output is negative</td>
</tr>
<tr class="odd">
<td>PF</td>
<td>The least significant byte of the output have even number of 1 bits</td>
</tr>
<tr class="even">
<td>AF</td>
<td>there a 1 bit carried out of position 3 in the least significant byte of the output</td>
</tr>
</tbody>
</table></li>
</ul>
<section id="carry-flag" class="level4">
<h4 class="anchored" data-anchor-id="carry-flag">Carry Flag</h4>
<p>Carry flag is set when:</p>
<ul>
<li>There is a carry <u><em>out</em></u> of the most significant bit (MSB) when adding two numbers:</li>
</ul>
<p><span class="math display">\[
\begin{array}{c*{9}{@{\,}c}}
        &amp;    &amp; 0 &amp; 1 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 1 \\
        &amp; +  &amp; 1 &amp; 1 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 1 &amp; 0 \\ \hline
   CF=1 &amp;    &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 1 &amp; 1
\end{array}
\]</span></p>
<ul>
<li>There is a borrow into the MSB when subtracting two numbers</li>
</ul>
<p><span class="math display">\[
\begin{array}{c*{9}{@{\,}c}}
     &amp;   &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 1 \\
     &amp; - &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 1 &amp; 0 \\ \hline
CF=1 &amp;   &amp; 1 &amp; 1 &amp; 1 &amp; 1 &amp; 1 &amp; 1 &amp; 1 &amp; 1
\end{array}
\]</span></p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Remember
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li><p>In unsigned arithmetic, watch the carry flag to detect errors</p></li>
<li><p>In signed arithmetic, the carry flag tells you nothing interesting</p></li>
</ul>
</div>
</div>
</section>
<section id="overflow-flag" class="level4">
<h4 class="anchored" data-anchor-id="overflow-flag">Overflow Flag</h4>
<p>Overflow flag is when:</p>
<ul>
<li>the sum of two numbers with the sign bits off yields a result number with sign bit on.</li>
</ul>
<p><span class="math display">\[
  \begin{array}{c*{9}{@{\,}c}}
       &amp;   &amp; 0 &amp; 0 &amp; 1 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 1 \\
       &amp; + &amp; 0 &amp; 1 &amp; 1 &amp; 0 &amp; 0 &amp; 0 &amp; 1 &amp; 0 \\ \hline
  OF=1 &amp;   &amp; 1 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 1 &amp; 1
  \end{array}
\]</span></p>
<ul>
<li>the sum of two numbers with the sign bits on yields a result number with sign bit off.</li>
</ul>
<p><span class="math display">\[
  \begin{array}{c*{9}{@{\,}c}}
       &amp;   &amp; 1 &amp; 0 &amp; 1 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 1 \\
       &amp; + &amp; 1 &amp; 0 &amp; 1 &amp; 0 &amp; 0 &amp; 0 &amp; 1 &amp; 0 \\ \hline
  OF=1 &amp;   &amp; 0 &amp; 1 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 1 &amp; 1
  \end{array}
\]</span></p>
</section>
<section id="how-the-alu-calculates-the-overflow-flag" class="level4">
<h4 class="anchored" data-anchor-id="how-the-alu-calculates-the-overflow-flag">How the ALU calculates the Overflow flag</h4>
<p>This material is optional reading.</p>
<ul>
<li><p>The value that carries out of the MSB is exclusive ORed with the carry into the MSB of the result.</p></li>
<li><p>The value that borrows out of the MSB is exclusive ORed with the borrow into the MSB of the result.</p></li>
<li><p>The resulting value of XOR is placed in the Overflow flag.</p></li>
<li><p>Example</p></li>
</ul>
<p><span class="math display">\[
  \begin{array}{c*{9}{@{\,}c}}
       &amp;   &amp; 1 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 \\
       &amp; + &amp; 1 &amp; 1 &amp; 1 &amp; 1 &amp; 1 &amp; 1 &amp; 1 &amp; 1 \\ \hline
  OF=1 &amp;   &amp; 0 &amp; 1 &amp; 1 &amp; 1 &amp; 1 &amp; 1 &amp; 1 &amp; 1
  \end{array}
\]</span></p>
<p>The carry into the MSB is 0 and the carry out of the MSB is 1, OF = 0 XOR 1 = 1</p>
<p><span class="math display">\[
  \begin{array}{c*{9}{@{\,}c}}
       &amp;   &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 1 \\
       &amp; - &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 1 &amp; 0 \\ \hline
  OF=0 &amp;   &amp; 1 &amp; 1 &amp; 1 &amp; 1 &amp; 1 &amp; 1 &amp; 1 &amp; 1
  \end{array}
\]</span></p>
<p>The borrow into the MSB is 1 and the borrow out of the MSB is 1, OF = 1 XOR 1 = 0</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Remember
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li><p>In signed arithmetic, watch the overflow flag to detect errors</p></li>
<li><p>In unsigned arithmetic, the overflow flag tells you nothing interesting</p></li>
</ul>
</div>
</div>
</section>
</section>
<section id="which-instructions-affect-flags" class="level3">
<h3 class="anchored" data-anchor-id="which-instructions-affect-flags">Which Instructions Affect Flags</h3>
<ul>
<li><p>In general, each time the processor executes an instruction, the flags are altered to reflect the result. However, some instructions don’t affect any of the flags, affect only some of them, or may leave them undefined.</p></li>
<li><p>Here is a summary of previous instructions:</p>
<table class="caption-top table">
<colgroup>
<col style="width: 42%">
<col style="width: 57%">
</colgroup>
<thead>
<tr class="header">
<th>Instructions</th>
<th>Flags</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Transfer instructions (such as MOV, XCHG)</td>
<td>None</td>
</tr>
<tr class="even">
<td>ADD and SUB</td>
<td>All flags</td>
</tr>
<tr class="odd">
<td>INC and DEC</td>
<td>All flags except CF</td>
</tr>
<tr class="even">
<td>NEG</td>
<td>All flags (remember NEG = subtracting operand from zero)</td>
</tr>
</tbody>
</table></li>
</ul>
</section>
</section>
<section id="multiplication-and-division" class="level2">
<h2 class="anchored" data-anchor-id="multiplication-and-division">Multiplication and Division</h2>
<section id="terms" class="level3">
<h3 class="anchored" data-anchor-id="terms">Terms</h3>
<ul>
<li><p>When multiplying two numbers, the first number is <strong>multiplicand</strong>, the second number is <strong>multiplier</strong> and the result is <strong>product</strong>.</p></li>
<li><p>If the size of multiplicand is n-bit and the size of multiplier is m-bit, then the size of product is at most (n+m)-bit.</p></li>
<li><p>When dividing two numbers, the first number is <strong>dividend</strong>, the second number is <strong>divisor</strong>, and the result is <strong>quotient</strong>. So, the dividend is the number that is divided by the divisor. The number left behind after the division is called the <strong>remainder</strong>.</p></li>
</ul>
</section>
<section id="mul-instruction" class="level3">
<h3 class="anchored" data-anchor-id="mul-instruction"><code>MUL</code> Instruction</h3>
<div class="callout callout-style-simple callout-important no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Syntax
</div>
</div>
<div class="callout-body-container callout-body">
<div class="sourceCode" id="cb23" data-code-line-numbers=""><pre class="sourceCode nasm code-with-copy"><code class="sourceCode nasm"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>        <span class="kw">MUL</span>     <span class="op">&lt;</span>multiplier<span class="op">&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<ul>
<li><p>This is the <em>unsigned</em> version of multiplication</p></li>
<li><p>The multiplier can be either <code>mem</code> or <code>reg</code>.</p></li>
<li><p>There are three formats depending on the size of multiplier (in 32-bit mode):</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Multiplier</th>
<th>Multiplicand</th>
<th>Product</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>reg/mem8</code></td>
<td><code>AL</code></td>
<td><code>AX</code></td>
</tr>
<tr class="even">
<td><code>reg/mem16</code></td>
<td><code>AX</code></td>
<td><code>DX:AX</code></td>
</tr>
<tr class="odd">
<td><code>reg/mem32</code></td>
<td><code>EAX</code></td>
<td><code>EDX:EAX</code></td>
</tr>
<tr class="even">
<td><code>imm</code></td>
<td>NOT ALLOWED</td>
<td></td>
</tr>
</tbody>
</table></li>
</ul>
<section id="flags-affected" class="level4">
<h4 class="anchored" data-anchor-id="flags-affected">Flags Affected</h4>
<p>The OF and CF flags are set to 0 if the upper half of the result is 0; otherwise, they are set to 1. The SF, ZF, AF, and PF flags are undefined.</p>
</section>
<section id="example-1" class="level4">
<h4 class="anchored" data-anchor-id="example-1">Example</h4>
<p><img src="..\images/mul.png" class="img-fluid" style="width:80.0%"></p>
</section>
</section>
<section id="imul-instruction" class="level3">
<h3 class="anchored" data-anchor-id="imul-instruction"><code>IMUL</code> Instruction</h3>
<div class="callout callout-style-simple callout-important no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Syntax
</div>
</div>
<div class="callout-body-container callout-body">
<div class="sourceCode" id="cb24" data-code-line-numbers=""><pre class="sourceCode nasm code-with-copy"><code class="sourceCode nasm"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>        <span class="kw">IMUL</span>      <span class="op">&lt;</span>source<span class="op">&gt;</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>        <span class="kw">IMUL</span>      <span class="op">&lt;</span>destination<span class="op">&gt;,</span> <span class="op">&lt;</span>source<span class="op">&gt;</span></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>        <span class="kw">IMUL</span>      <span class="op">&lt;</span>destination<span class="op">&gt;,</span> <span class="op">&lt;</span>source1<span class="op">&gt;,</span> <span class="op">&lt;</span>source2<span class="op">&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<section id="single-operand-form" class="level4">
<h4 class="anchored" data-anchor-id="single-operand-form">Single-Operand Form</h4>
<ul>
<li>This form is identical to that used by the <code>MUL</code> instruction.</li>
</ul>
</section>
<section id="two-operand-form" class="level4">
<h4 class="anchored" data-anchor-id="two-operand-form">Two-Operand Form</h4>
<ul>
<li><p>The destination operand is multiplied by the source operand. The product is truncated and stored in the destination operand.</p></li>
<li><p>The destination operand must be register (either <code>reg16</code> or <code>reg32</code> only)</p></li>
<li><p>The valid formats are</p>
<div class="sourceCode" id="cb25" data-code-line-numbers=""><pre class="sourceCode nasm code-with-copy"><code class="sourceCode nasm"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>      <span class="kw">IMUL</span>    reg16<span class="op">,</span> reg<span class="op">/</span>mem16</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>      <span class="kw">IMUL</span>    reg16<span class="op">,</span> imm8</span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>      <span class="kw">IMUL</span>    reg16<span class="op">,</span> imm16</span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>      <span class="kw">IMUL</span>    reg32<span class="op">,</span> reg<span class="op">/</span>mem32</span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a>      <span class="kw">IMUL</span>    reg32<span class="op">,</span> imm8</span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a>      <span class="kw">IMUL</span>    reg32<span class="op">,</span> imm32</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
</ul>
</section>
<section id="three-operand-form" class="level4">
<h4 class="anchored" data-anchor-id="three-operand-form">Three-Operand Form</h4>
<ul>
<li><p>The first source operand is multiplied by the second operand. The product is truncated and stored in the destination operand</p></li>
<li><p>The destination operand must be register (either <code>reg16</code> or <code>reg32</code>). The first operand must be a register or memory with same size as the destination operand. The second operand must be immediate operand</p></li>
<li><p>The valid formats are:</p>
<div class="sourceCode" id="cb26" data-code-line-numbers=""><pre class="sourceCode nasm code-with-copy"><code class="sourceCode nasm"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>      <span class="kw">IMUL</span>    reg16<span class="op">,</span> reg<span class="op">/</span>mem16<span class="op">,</span> imm8</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>      <span class="kw">IMUL</span>    reg16<span class="op">,</span> reg<span class="op">/</span>mem16<span class="op">,</span> imm16</span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>      <span class="kw">IMUL</span>    reg32<span class="op">,</span> reg<span class="op">/</span>mem32<span class="op">,</span> imm8</span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>      <span class="kw">IMUL</span>    reg32<span class="op">,</span> reg<span class="op">/</span>mem32<span class="op">,</span> imm32</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
</ul>
</section>
<section id="flags-affected-1" class="level4">
<h4 class="anchored" data-anchor-id="flags-affected-1">Flags Affected</h4>
<ul>
<li><p>For the one operand form of the instruction, the CF and OF flags are set when significant bits are carried into the upper half of the result and cleared when the result fits exactly in the lower half of the result.</p></li>
<li><p>For the two- and three-operand forms of the instruction, the CF and OF flags are set when the result must be truncated to fit in the destination operand size and cleared when the result fits exactly in the destination operand size.</p></li>
<li><p>The SF, ZF, AF, and PF flags are undefined.</p></li>
</ul>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Remember
</div>
</div>
<div class="callout-body-container callout-body">
<p>With the two- and three- operand forms, the result is truncated to the length of the destination before it is stored in the destination register. Because of this truncation, the CF or OF flag should be tested to ensure that no significant bits are lost.</p>
</div>
</div>
</section>
<section id="examples" class="level4">
<h4 class="anchored" data-anchor-id="examples">Examples</h4>
<div id="exm-21" class="theorem example">
<p><span class="theorem-title"><strong>Example 6</strong></span> &nbsp;</p>
<div class="sourceCode" id="cb27" data-code-line-numbers=""><pre class="sourceCode nasm code-with-copy"><code class="sourceCode nasm"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>        <span class="kw">section</span> <span class="fu">.data</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>varW    <span class="dt">dw</span>    <span class="dv">4</span></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>varDW   <span class="dt">dd</span>    <span class="dv">4</span></span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a>        <span class="kw">section</span> <span class="fu">.text</span></span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a>        <span class="kw">mov</span>     <span class="kw">ax</span><span class="op">,</span> <span class="op">-</span><span class="dv">16</span>       <span class="co">; AX = -16</span></span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a>        <span class="kw">mov</span>     <span class="kw">bx</span><span class="op">,</span> <span class="dv">2</span>         <span class="co">; BX = 2</span></span>
<span id="cb27-8"><a href="#cb27-8" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb27-9"><a href="#cb27-9" aria-hidden="true" tabindex="-1"></a>        <span class="kw">imul</span>    <span class="kw">bx</span><span class="op">,</span> <span class="kw">ax</span>        <span class="co">; BX = -32</span></span>
<span id="cb27-10"><a href="#cb27-10" aria-hidden="true" tabindex="-1"></a>        <span class="kw">imul</span>    <span class="kw">bx</span><span class="op">,</span> <span class="dv">2</span>         <span class="co">; BX = -64</span></span>
<span id="cb27-11"><a href="#cb27-11" aria-hidden="true" tabindex="-1"></a>        <span class="kw">imul</span>    <span class="kw">bx</span><span class="op">,</span> <span class="op">[</span>varW<span class="op">]</span>    <span class="co">; BX = -256</span></span>
<span id="cb27-12"><a href="#cb27-12" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb27-13"><a href="#cb27-13" aria-hidden="true" tabindex="-1"></a>        <span class="kw">mov</span>     <span class="kw">eax</span><span class="op">,</span> <span class="op">-</span><span class="dv">16</span></span>
<span id="cb27-14"><a href="#cb27-14" aria-hidden="true" tabindex="-1"></a>        <span class="kw">mov</span>     <span class="kw">ebx</span><span class="op">,</span> <span class="dv">2</span></span>
<span id="cb27-15"><a href="#cb27-15" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb27-16"><a href="#cb27-16" aria-hidden="true" tabindex="-1"></a>        <span class="kw">imul</span>    <span class="kw">ebx</span><span class="op">,</span> <span class="kw">eax</span>      <span class="co">; EBX = -32</span></span>
<span id="cb27-17"><a href="#cb27-17" aria-hidden="true" tabindex="-1"></a>        <span class="kw">imul</span>    <span class="kw">ebx</span><span class="op">,</span> <span class="dv">2</span>        <span class="co">; EBX = -64</span></span>
<span id="cb27-18"><a href="#cb27-18" aria-hidden="true" tabindex="-1"></a>        <span class="kw">imul</span>    <span class="kw">ebx</span><span class="op">,</span> <span class="op">[</span>varDW<span class="op">]</span>  <span class="co">; EBX = -256</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="exm-22" class="theorem example">
<p><span class="theorem-title"><strong>Example 7</strong></span> Translate <code>y = x * 7</code> to Assembly, assuming that <code>x</code> and <code>y</code> are declared as singed integer.</p>
<div class="sourceCode" id="cb28" data-code-line-numbers=""><pre class="sourceCode nasm code-with-copy"><code class="sourceCode nasm"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>        <span class="kw">mov</span>   <span class="kw">eax</span><span class="op">,</span> <span class="op">[</span>x<span class="op">]</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>        <span class="kw">imul</span>  <span class="kw">eax</span><span class="op">,</span> <span class="dv">7</span>          <span class="co">; eax = eax * 7 </span></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>        <span class="kw">mov</span>   <span class="op">[</span>y<span class="op">],</span> <span class="kw">eax</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Or</p>
<div class="sourceCode" id="cb29" data-code-line-numbers=""><pre class="sourceCode nasm code-with-copy"><code class="sourceCode nasm"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>        <span class="kw">mov</span>   <span class="kw">eax</span><span class="op">,</span> <span class="op">[</span>x<span class="op">]</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>        <span class="kw">mov</span>   <span class="kw">ebx</span><span class="op">,</span> <span class="dv">7</span></span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>        <span class="kw">imul</span>   <span class="kw">ebx</span>            <span class="co">; eax = eax * ebx</span></span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>        <span class="kw">mov</span>   <span class="op">[</span>y<span class="op">],</span> <span class="kw">eax</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Or</p>
<div class="sourceCode" id="cb30" data-code-line-numbers=""><pre class="sourceCode nasm code-with-copy"><code class="sourceCode nasm"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>        <span class="kw">imul</span>  <span class="kw">eax</span><span class="op">,</span> <span class="op">[</span>x<span class="op">],</span> <span class="dv">7</span> </span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>        <span class="kw">mov</span>   <span class="op">[</span>y<span class="op">],</span> <span class="kw">eax</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="div-instruction" class="level3">
<h3 class="anchored" data-anchor-id="div-instruction"><code>DIV</code> Instruction</h3>
<div class="callout callout-style-simple callout-important no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Syntax
</div>
</div>
<div class="callout-body-container callout-body">
<div class="sourceCode" id="cb31" data-code-line-numbers=""><pre class="sourceCode nasm code-with-copy"><code class="sourceCode nasm"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>        <span class="kw">DIV</span>     <span class="op">&lt;</span>divisor<span class="op">&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<ul>
<li><p>This the unsigned version of division</p></li>
<li><p>There are three formats depending on the size of divisor (in 32-bit mode):</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Divisor</th>
<th>Dividend</th>
<th>Quotient</th>
<th>Remainder</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>reg/mem8</code></td>
<td><code>AX</code></td>
<td><code>AL</code></td>
<td><code>AH</code></td>
</tr>
<tr class="even">
<td><code>reg/mem16</code></td>
<td><code>DX:AX</code></td>
<td><code>AX</code></td>
<td><code>DX</code></td>
</tr>
<tr class="odd">
<td><code>reg/mem32</code></td>
<td><code>EDX:EAX</code></td>
<td><code>EAX</code></td>
<td><code>EDX</code></td>
</tr>
<tr class="even">
<td>immediate</td>
<td>NOT ALLOWED</td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Remember
</div>
</div>
<div class="callout-body-container callout-body">
<p>If you did not set the upper half of the dividend, don’t forget to clear it using one of the following instructions:</p>
<div class="sourceCode" id="cb32" data-code-line-numbers=""><pre class="sourceCode nasm code-with-copy"><code class="sourceCode nasm"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>        <span class="kw">xor</span>   <span class="kw">ax</span><span class="op">,</span> <span class="kw">ax</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>        <span class="kw">mov</span>   <span class="kw">ah</span><span class="op">,</span> <span class="dv">0</span></span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>        <span class="kw">sub</span>   <span class="kw">edx</span><span class="op">,</span> <span class="kw">edx</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div></li>
</ul>
<section id="flags-affected-2" class="level4">
<h4 class="anchored" data-anchor-id="flags-affected-2">Flags Affected</h4>
<p>The CF, OF, SF, ZF, AF, and PF flags are undefined.</p>
</section>
</section>
<section id="idiv-instruction" class="level3">
<h3 class="anchored" data-anchor-id="idiv-instruction"><code>IDIV</code> Instruction</h3>
<ul>
<li><p>This is the signed version of division</p></li>
<li><p>It has the same syntax as <code>DIV</code></p></li>
<li><p>If <span class="math inline">\(q = a / b\)</span> where <span class="math inline">\(q\)</span> is the quotient, <span class="math inline">\(a\)</span> is the dividend, and <span class="math inline">\(b\)</span> is divisor, then <span class="math inline">\(a = q*b + r\)</span></p></li>
<li><p>The sign of the remainder is always the same as the sign of the dividend</p></li>
<li><p>If the divisor is <span class="math inline">\(0\)</span>, an interrupt called <code>#DE</code> is generated to terminate the program.</p></li>
</ul>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Remember
</div>
</div>
<div class="callout-body-container callout-body">
<p>The dividend must be sign-extended before the division takes place. As such, x86 architecture provides <code>CBW</code>, <code>CWD</code>, and <code>CDQ</code> to sign extend the dividend.</p>
</div>
</div>
<section id="cbw-instruction" class="level4">
<h4 class="anchored" data-anchor-id="cbw-instruction">CBW Instruction</h4>
<ul>
<li><p><strong>C</strong>onvert <strong>B</strong>yte to <strong>W</strong>ord. This instruction requires no operand.</p></li>
<li><p>Impact: If MSB of <code>AL</code> is 1, then <code>AH = 0xFF</code>, otherwise <code>AH = 0</code>.</p></li>
</ul>
</section>
<section id="cwd-instruction" class="level4">
<h4 class="anchored" data-anchor-id="cwd-instruction">CWD Instruction</h4>
<ul>
<li><p><strong>C</strong>onvert <strong>W</strong>ord to <strong>D</strong>oubleword. This instruction requires no operand.</p></li>
<li><p>Impact: If MSB of <code>AX</code> is 1, then <code>DX = 0xFFFF</code>, otherwise <code>DX = 0</code>.</p></li>
</ul>
</section>
<section id="cdq-instruction" class="level4">
<h4 class="anchored" data-anchor-id="cdq-instruction">CDQ Instruction</h4>
<ul>
<li><p><strong>C</strong>onvert <strong>D</strong>oubleword to <strong>Q</strong>uadword. This instruction requires no operand.</p></li>
<li><p>Impact: If MSB of <code>EAX</code> is 1, then <code>EDX = 0xFFFF-FFFF</code>, otherwise <code>EDX = 0</code>.</p></li>
</ul>
<div id="exm-23" class="theorem example">
<p><span class="theorem-title"><strong>Example 8</strong></span> &nbsp;</p>
<div class="sourceCode" id="cb33" data-code-line-numbers=""><pre class="sourceCode nasm code-with-copy"><code class="sourceCode nasm"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>        <span class="kw">mov</span>     <span class="kw">al</span><span class="op">,</span> <span class="dv">125</span>     <span class="co">; dividend = AL = 125</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>        <span class="kw">cbw</span>                 <span class="co">; AH = 0</span></span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>        <span class="kw">mov</span>     <span class="kw">bl</span><span class="op">,</span> <span class="dv">2</span>       <span class="co">; BL = 2</span></span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a>        <span class="kw">div</span>     <span class="kw">bl</span>          <span class="co">; AL =125/2=62=3Dh, AH = 01h</span></span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a>        <span class="kw">mov</span>     <span class="kw">al</span><span class="op">,</span> <span class="op">-</span><span class="dv">125</span>    <span class="co">; AL = -125 = 83h</span></span>
<span id="cb33-7"><a href="#cb33-7" aria-hidden="true" tabindex="-1"></a>        <span class="kw">cbw</span>                 <span class="co">; AX = FF83h</span></span>
<span id="cb33-8"><a href="#cb33-8" aria-hidden="true" tabindex="-1"></a>        <span class="kw">mov</span>     <span class="kw">bl</span><span class="op">,</span> <span class="dv">2</span></span>
<span id="cb33-9"><a href="#cb33-9" aria-hidden="true" tabindex="-1"></a>        <span class="kw">idiv</span>    <span class="kw">bl</span>          <span class="co">; AL = -125/2 = -62 = 0C2h, AH = -1 = 0FFh</span></span>
<span id="cb33-10"><a href="#cb33-10" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb33-11"><a href="#cb33-11" aria-hidden="true" tabindex="-1"></a>        <span class="kw">mov</span>     <span class="kw">dx</span><span class="op">,</span> <span class="dv">0</span>       <span class="co">; clear dividend, high</span></span>
<span id="cb33-12"><a href="#cb33-12" aria-hidden="true" tabindex="-1"></a>        <span class="kw">mov</span>     <span class="kw">ax</span><span class="op">,</span> <span class="bn">8003h</span>   <span class="co">; dividend, low</span></span>
<span id="cb33-13"><a href="#cb33-13" aria-hidden="true" tabindex="-1"></a>        <span class="kw">mov</span>     <span class="kw">cx</span><span class="op">,</span> <span class="bn">100h</span>    <span class="co">; divisor</span></span>
<span id="cb33-14"><a href="#cb33-14" aria-hidden="true" tabindex="-1"></a>        <span class="kw">div</span>     <span class="kw">cx</span>          <span class="co">; AX = 0080h, DX = 0003h</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>In the remaining examples, we are going to translate from high-level language to assembly language. All variables are 32-bit signed integers</p>
<div id="exm-24" class="theorem example">
<p><span class="theorem-title"><strong>Example 9</strong></span> &nbsp;</p>
<div class="sourceCode" id="cb34" data-code-line-numbers=""><pre class="sourceCode cpp code-with-copy"><code class="sourceCode cpp"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>      f <span class="op">=</span> <span class="dv">9</span><span class="op">/</span><span class="dv">5</span><span class="op">*</span>c <span class="op">+</span> <span class="dv">32</span><span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="sourceCode" id="cb35" data-code-line-numbers=""><pre class="sourceCode nasm code-with-copy"><code class="sourceCode nasm"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>        <span class="kw">mov</span>     <span class="kw">eax</span><span class="op">,</span> <span class="op">[</span>c<span class="op">]</span>    <span class="co">; EAX = c</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>        <span class="kw">imul</span>    <span class="kw">eax</span><span class="op">,</span> <span class="dv">9</span>      <span class="co">; EAX = 9 * c</span></span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>        <span class="kw">mov</span>     <span class="kw">ebx</span><span class="op">,</span> <span class="dv">5</span>      <span class="co">; EBX = 5 (divisor)</span></span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a>        <span class="kw">cdq</span>                 <span class="co">; Sign-extend EAX to EDX</span></span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a>        <span class="kw">idiv</span>    <span class="kw">ebx</span>         <span class="co">; EAX = EAX / EBX</span></span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a>        <span class="kw">mov</span>     <span class="op">[</span>f<span class="op">],</span> <span class="kw">eax</span>    <span class="co">; f = EAX</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="exm-25" class="theorem example">
<p><span class="theorem-title"><strong>Example 10</strong></span> &nbsp;</p>
<div class="sourceCode" id="cb36" data-code-line-numbers=""><pre class="sourceCode cpp code-with-copy"><code class="sourceCode cpp"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>      v4 <span class="op">=</span> <span class="op">(</span>v1 <span class="op">*</span> <span class="dv">5</span><span class="op">)</span> <span class="op">/</span> <span class="op">(</span>v2 <span class="op">-</span> <span class="dv">3</span><span class="op">);</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="sourceCode" id="cb37" data-code-line-numbers=""><pre class="sourceCode nasm code-with-copy"><code class="sourceCode nasm"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>        <span class="kw">mov</span>   <span class="kw">eax</span><span class="op">,</span> <span class="op">[</span>v1<span class="op">]</span>     <span class="co">; EAX = v1</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>        <span class="kw">imul</span>  <span class="kw">eax</span><span class="op">,</span> <span class="dv">5</span>        <span class="co">; EAX = EAX * 5</span></span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>        <span class="kw">mov</span>   <span class="kw">ebx</span><span class="op">,</span> <span class="op">[</span>v2<span class="op">]</span>     <span class="co">; EBX = v2</span></span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a>        <span class="kw">sub</span>   <span class="kw">ebx</span><span class="op">,</span> <span class="dv">3</span>        <span class="co">; EBX = v2 - 3</span></span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a>        <span class="kw">cdq</span>                 <span class="co">; Sign-extend EAX to EDX</span></span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a>        <span class="kw">idiv</span>  <span class="kw">ebx</span>           <span class="co">; EAX = EAX / EDX</span></span>
<span id="cb37-7"><a href="#cb37-7" aria-hidden="true" tabindex="-1"></a>        <span class="kw">mov</span>   <span class="op">[</span>v4<span class="op">],</span> <span class="kw">eax</span>     <span class="co">; v4 = EAX</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="exm-26" class="theorem example">
<p><span class="theorem-title"><strong>Example 11</strong></span> &nbsp;</p>
<div class="sourceCode" id="cb38" data-code-line-numbers=""><pre class="sourceCode cpp code-with-copy"><code class="sourceCode cpp"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>      v4 <span class="op">=</span> <span class="op">-</span>v1 <span class="op">*</span> <span class="dv">5</span><span class="op">/(-</span>v2 <span class="op">%</span> v3<span class="op">)</span> </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="sourceCode" id="cb39" data-code-line-numbers=""><pre class="sourceCode nasm code-with-copy"><code class="sourceCode nasm"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>        <span class="kw">mov</span>   <span class="kw">eax</span><span class="op">,</span> <span class="op">[</span>v1<span class="op">]</span>     <span class="co">; EAX = v1</span></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>        <span class="kw">neg</span>   <span class="kw">eax</span>           <span class="co">; EAX = -v1</span></span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a>        <span class="kw">imul</span>  <span class="kw">ecx</span><span class="op">,</span> <span class="kw">eax</span><span class="op">,</span> <span class="dv">5</span>   <span class="co">; ECX = -v1 * 5</span></span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a>        <span class="kw">mov</span>   <span class="kw">eax</span><span class="op">,</span> <span class="op">[</span>v2<span class="op">]</span>     <span class="co">; EAX = v2</span></span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true" tabindex="-1"></a>        <span class="kw">neg</span>   <span class="kw">eax</span>           <span class="co">; EAX = -v2</span></span>
<span id="cb39-7"><a href="#cb39-7" aria-hidden="true" tabindex="-1"></a>        <span class="kw">mov</span>   <span class="kw">ebx</span><span class="op">,</span> <span class="op">[</span>v3<span class="op">]</span>     <span class="co">; EBX = v3</span></span>
<span id="cb39-8"><a href="#cb39-8" aria-hidden="true" tabindex="-1"></a>        <span class="kw">cdq</span>                 <span class="co">; sign-extend EAX to EDX</span></span>
<span id="cb39-9"><a href="#cb39-9" aria-hidden="true" tabindex="-1"></a>        <span class="kw">idiv</span>  <span class="kw">ebx</span>           <span class="co">; EAX = EAX / EBX, Rem = EDX</span></span>
<span id="cb39-10"><a href="#cb39-10" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb39-11"><a href="#cb39-11" aria-hidden="true" tabindex="-1"></a>        <span class="kw">mov</span>   <span class="kw">eax</span><span class="op">,</span> <span class="kw">ecx</span>      <span class="co">; Set EAX = ECX (enumerator)</span></span>
<span id="cb39-12"><a href="#cb39-12" aria-hidden="true" tabindex="-1"></a>        <span class="kw">mov</span>   <span class="kw">ebx</span><span class="op">,</span> <span class="kw">edx</span>      <span class="co">; Set EBX = EDX (denominator)</span></span>
<span id="cb39-13"><a href="#cb39-13" aria-hidden="true" tabindex="-1"></a>        <span class="kw">cdq</span></span>
<span id="cb39-14"><a href="#cb39-14" aria-hidden="true" tabindex="-1"></a>        <span class="kw">idiv</span>  <span class="kw">ebx</span>           <span class="co">; EAX = EAX / EBX</span></span>
<span id="cb39-15"><a href="#cb39-15" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb39-16"><a href="#cb39-16" aria-hidden="true" tabindex="-1"></a>        <span class="kw">mov</span>   <span class="op">[</span>v4<span class="op">],</span> <span class="kw">eax</span>     <span class="co">; v4 = EAX</span></span>
<span id="cb39-17"><a href="#cb39-17" aria-hidden="true" tabindex="-1"></a>        </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
</section>
<section id="logic-instructions" class="level2">
<h2 class="anchored" data-anchor-id="logic-instructions">Logic Instructions</h2>
<ul>
<li>The Intel instruction set contains the AND, OR, XOR, NOT, and many more instructions , which directly implement boolean operations on binary bits.</li>
</ul>
<div class="callout callout-style-simple callout-important no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Syntax
</div>
</div>
<div class="callout-body-container callout-body">
<div class="sourceCode" id="cb40" data-code-line-numbers=""><pre class="sourceCode nasm code-with-copy"><code class="sourceCode nasm"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>        <span class="kw">AND</span>     <span class="op">&lt;</span>destination<span class="op">&gt;,</span> <span class="op">&lt;</span>source<span class="op">&gt;</span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>        <span class="kw">OR</span>      <span class="op">&lt;</span>destination<span class="op">&gt;,</span> <span class="op">&lt;</span>source<span class="op">&gt;</span></span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a>        <span class="kw">XOR</span>     <span class="op">&lt;</span>destination<span class="op">&gt;,</span> <span class="op">&lt;</span>source<span class="op">&gt;</span></span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a>        <span class="kw">NOT</span>     <span class="op">&lt;</span>destination<span class="op">&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<ul>
<li><p>The following table describes the operation of each instruction</p>
<table class="caption-top table">
<colgroup>
<col style="width: 12%">
<col style="width: 87%">
</colgroup>
<thead>
<tr class="header">
<th>Instruction</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>AND</td>
<td>Bitwise logical AND operation between a source operand and a destination operand</td>
</tr>
<tr class="even">
<td>OR</td>
<td>Bitwise logical OR operation between a source operand and a destination operand</td>
</tr>
<tr class="odd">
<td>XOR</td>
<td>Bitwise logical exclusive-OR operation between a source operand and a destination operand</td>
</tr>
<tr class="even">
<td>NOT</td>
<td>Bitwise NOT operation on a destination operand</td>
</tr>
</tbody>
</table></li>
</ul>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Rules
</div>
</div>
<div class="callout-body-container callout-body">
<ol type="1">
<li>Both operands must be the same size</li>
<li>Both operands cannot be memory operands</li>
<li>The instruction pointer register (EIP, RIP) cannot be a destination operand</li>
</ol>
</div>
</div>
<p>The following operand types are permitted for these instructions:</p>
<pre data-code-line-numbers=""><code>        and   reg, reg
        and   reg, mem
        and   reg, imm
        and   mem, reg
        and   mem, imm
        not   reg
        not   mem</code></pre>
<section id="flags-affected-3" class="level4">
<h4 class="anchored" data-anchor-id="flags-affected-3">Flags Affected</h4>
<ul>
<li><p>The OF and CF are cleared.</p></li>
<li><p>The SF, ZF, and PF are set according to the result.</p></li>
<li><p>The state of AF is undefined.</p></li>
</ul>
</section>
<section id="implementations" class="level3">
<h3 class="anchored" data-anchor-id="implementations">Implementations</h3>
<section id="clearingmasking-bits" class="level4">
<h4 class="anchored" data-anchor-id="clearingmasking-bits">Clearing/Masking Bits</h4>
<ul>
<li><p>The AND instruction allows us to clear 1 or more bits in an operand without affecting other bits. This technique is called <strong>bit masking</strong>.</p></li>
<li><p>To clear a bit (or more), use AND with a <strong>mask</strong> that has a 0 in the position which is to be cleared. All other positions in the mask contain 1.</p></li>
<li><p>For example, suppose we have the bit string <span class="math inline">\(1110\,0110\)</span> and we want to clear bit 2 (change it to 0). We can use mask <span class="math inline">\(1111\,1011_2\)</span> as follows:</p>
<div class="sourceCode" id="cb42" data-code-line-numbers=""><pre class="sourceCode nasm code-with-copy"><code class="sourceCode nasm"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>        <span class="kw">mov</span>     <span class="kw">AL</span><span class="op">,</span> <span class="bn">1110_0110b</span>      <span class="co">; bit string</span></span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>        <span class="kw">and</span>     <span class="kw">AL</span><span class="op">,</span> <span class="bn">1111_1011b</span>      <span class="co">; AL=1110 0010</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
</ul>
</section>
<section id="setting-bits" class="level4">
<h4 class="anchored" data-anchor-id="setting-bits">Setting Bits</h4>
<ul>
<li><p>The OR instruction allows us to set 1 or more bits in an operand without affecting any other bits.</p></li>
<li><p>To set a bit (or more), use OR with a mask that has 1 in the position which is to be set. All other positions in the mask contain 0.</p></li>
<li><p>The following code:</p>
<div class="sourceCode" id="cb43" data-code-line-numbers=""><pre class="sourceCode nasm code-with-copy"><code class="sourceCode nasm"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>        <span class="kw">or</span>      <span class="kw">AL</span><span class="op">,</span> <span class="bn">0000_0100b</span>    <span class="co">; set bit 2</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>will set bit at position 2 to 1 and leave other bits unchanged.</p></li>
</ul>
</section>
<section id="toggling-bits" class="level4">
<h4 class="anchored" data-anchor-id="toggling-bits">Toggling Bits</h4>
<ul>
<li><p>We can toggle or switch the value of individual bits from 1 to 0 or vice versa.</p></li>
<li><p>To toggle a bit, use XOR with a mask that has 1 in the position which is to be toggled. All other positions in the mask contain 0.</p></li>
<li><p>Consider the following example</p></li>
</ul>
<p><span class="math display">\[
\begin{array}{c*{9}{@{\,}c}}
  \text{Original Value}     &amp; =  &amp; 1 &amp; 0 &amp; 0 &amp; 1 &amp; 0 &amp; 1 &amp; 1 &amp; 0 \\
  \text{  XOR'ed Value}     &amp; =  &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 1 &amp; 1 &amp; 1 &amp; 1 \\ \hline
  \text{ Toggled Value}     &amp; =   &amp; 1 &amp; 0 &amp; 0 &amp; 1 &amp; 1 &amp; 0 &amp; 0 &amp; 1
\end{array}
\]</span></p>
</section>
<section id="testing-a-bit" class="level4">
<h4 class="anchored" data-anchor-id="testing-a-bit">Testing a Bit</h4>
<ul>
<li><p>To test a bit, use AND with a mask that has 1 in the position which is to be tested. All other positions in the mask contain 0.</p></li>
<li><p>Example, suppose we have the bit string <span class="math inline">\(1110\,0110\)</span> and we want to test bit 5 (check its value). We can use mask <span class="math inline">\(0010\;0000_2\)</span> and the AND:</p>
<div class="sourceCode" id="cb44" data-code-line-numbers=""><pre class="sourceCode nasm code-with-copy"><code class="sourceCode nasm"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a>        <span class="kw">mov</span>     <span class="kw">AL</span><span class="op">,</span> <span class="bn">1110_0110b</span>    <span class="co">; our bit string</span></span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a>        <span class="kw">and</span>     <span class="kw">AL</span><span class="op">,</span> <span class="bn">0010_0000b</span>    <span class="co">; The result = 0010 0000</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
<li><p>Since bit 5 was set, the result is a nonzero value. However, suppose we want to test bit 4. We use mask <span class="math inline">\(0001\;0000\)</span> and the AND operation:</p>
<div class="sourceCode" id="cb45" data-code-line-numbers=""><pre class="sourceCode nasm code-with-copy"><code class="sourceCode nasm"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a>        <span class="kw">mov</span>     <span class="kw">AL</span><span class="op">,</span> <span class="bn">1110_0110b</span>    <span class="co">; our bit string</span></span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a>        <span class="kw">and</span>     <span class="kw">AL</span><span class="op">,</span> <span class="bn">0001_0000b</span>    <span class="co">; The result = 0000 0000</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
<li><p>Since bit 4 was not set, the result is a zero value.</p></li>
<li><p>So after the AND, we need to test the result; if the result is nonzero, the bit is set, otherwise it is not.</p></li>
</ul>
</section>
</section>
</section>
<section id="indirect-addressing-modes" class="level2">
<h2 class="anchored" data-anchor-id="indirect-addressing-modes">Indirect Addressing Modes</h2>
<ul>
<li><p>Memory locations (where the objects are located) can be specified:</p>
<ul>
<li><p><strong>Directly</strong> as static value (also known as displacement)</p></li>
<li><p><strong>Indirectly</strong> through an address computation made up of one or more of the following components:</p>
<ol type="1">
<li><p>Displacement</p></li>
<li><p>Base</p></li>
<li><p>Index</p></li>
<li><p>Scale-Factor</p></li>
</ol></li>
</ul></li>
<li><p>The offset address which results from adding these components is called an <strong>effective address</strong>.</p></li>
</ul>
<p>In the following section, we consider the following data definition</p>
<div class="sourceCode" id="cb46" data-code-line-numbers=""><pre class="sourceCode nasm code-with-copy"><code class="sourceCode nasm"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a>        <span class="kw">section</span> <span class="fu">.data</span></span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a>v1      <span class="dt">db</span>      <span class="dv">50</span><span class="op">,</span> <span class="dv">62</span></span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a>arrX    <span class="dt">dw</span>      <span class="dv">1</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="dv">5</span></span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a>matr    <span class="dt">dd</span>      <span class="dv">10</span><span class="op">,</span> <span class="dv">11</span><span class="op">,</span> <span class="dv">12</span><span class="op">,</span> <span class="dv">13</span></span>
<span id="cb46-5"><a href="#cb46-5" aria-hidden="true" tabindex="-1"></a>        <span class="dt">dd</span>      <span class="dv">20</span><span class="op">,</span> <span class="dv">21</span><span class="op">,</span> <span class="dv">22</span><span class="op">,</span> <span class="dv">23</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<section id="displacement-addressing-mode" class="level3">
<h3 class="anchored" data-anchor-id="displacement-addressing-mode">Displacement Addressing Mode</h3>
<ul>
<li><p>A displacement is 8-, 16-, or 32-bit constant value or expression</p></li>
<li><p>Displacement alone represents a direct offset to the operand.</p></li>
<li><p>The syntax is:</p>
<div class="callout callout-style-simple callout-important no-icon">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-body-container">
<pre data-code-line-numbers=""><code>        [ &lt;disp32&gt; ]</code></pre>
<p>where <code>disp32</code> is 32-bit displacement value</p>
</div>
</div>
</div></li>
<li><p>Example</p>
<div class="sourceCode" id="cb48" data-code-line-numbers=""><pre class="sourceCode nasm code-with-copy"><code class="sourceCode nasm"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a>        <span class="kw">mov</span>   <span class="kw">al</span><span class="op">,</span> <span class="op">[</span>v1<span class="op">]</span>        <span class="co">; AL = 50</span></span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a>        <span class="kw">add</span>   <span class="kw">al</span><span class="op">,</span> <span class="op">[</span>v1 <span class="op">+</span> <span class="dv">1</span><span class="op">]</span>    <span class="co">; AL = 50 + 62 = 112</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
</ul>
</section>
<section id="base-addressing-mode" class="level3">
<h3 class="anchored" data-anchor-id="base-addressing-mode">Base Addressing Mode</h3>
<ul>
<li><p>Base alone represents an indirect offset to the operand.</p></li>
<li><p>In this mode, the offset address is contained in a <em>general purpose register</em>. We say that the register acts as <strong>a pointer</strong> to the memory location.</p></li>
<li><p>The syntax for 32-bit architecture is:</p>
<div class="callout callout-style-simple callout-important no-icon">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-body-container">
<pre data-code-line-numbers=""><code>        [ &lt;reg32&gt; ]</code></pre>
</div>
</div>
</div></li>
<li><p>Example:</p>
<div class="sourceCode" id="cb50" data-code-line-numbers=""><pre class="sourceCode nasm code-with-copy"><code class="sourceCode nasm"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a>        <span class="kw">mov</span>     <span class="kw">esi</span><span class="op">,</span> arrX     <span class="co">; ESI points to the 1st element in arrX</span></span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a>        <span class="kw">mov</span>     <span class="kw">ax</span><span class="op">,</span> <span class="dv">0</span>         <span class="co">; set sum to zero</span></span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a>        <span class="kw">add</span>     <span class="kw">ax</span><span class="op">,</span> <span class="op">[</span><span class="kw">esi</span><span class="op">]</span>     <span class="co">; add arrX[0] to sum, AX = 1</span></span>
<span id="cb50-4"><a href="#cb50-4" aria-hidden="true" tabindex="-1"></a>        <span class="kw">add</span>     <span class="kw">esi</span><span class="op">,</span> <span class="dv">2</span>        <span class="co">; move pointer to next element</span></span>
<span id="cb50-5"><a href="#cb50-5" aria-hidden="true" tabindex="-1"></a>        <span class="kw">add</span>     <span class="kw">ax</span><span class="op">,</span> <span class="op">[</span><span class="kw">esi</span><span class="op">]</span>     <span class="co">; add arrX[1] to sum, AX = 1+2 = 3</span></span>
<span id="cb50-6"><a href="#cb50-6" aria-hidden="true" tabindex="-1"></a>        <span class="kw">add</span>     <span class="kw">esi</span><span class="op">,</span> <span class="dv">2</span>        <span class="co">; move pointer to next element</span></span>
<span id="cb50-7"><a href="#cb50-7" aria-hidden="true" tabindex="-1"></a>        <span class="kw">add</span>     <span class="kw">ax</span><span class="op">,</span> <span class="op">[</span><span class="kw">esi</span><span class="op">]</span>     <span class="co">; add arrX[2] to sum, AX = 3+3 = 6</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
</ul>
</section>
<section id="base-displacement-addressing-mode" class="level3">
<h3 class="anchored" data-anchor-id="base-displacement-addressing-mode">Base + Displacement Addressing Mode</h3>
<ul>
<li><p>A base register and a displacement can be used together to access a field of a record. The base register holds the address of the beginning of the record, while the displacement holds a static offset to the field</p></li>
<li><p>This mode is specially useful when we need to access parameters in a procedure activation record. We will elaborate this mode when we discuss procedures.</p></li>
<li><p>The syntax is</p>
<div class="callout callout-style-simple callout-important no-icon">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-body-container">
<pre data-code-line-numbers=""><code>        [ &lt;reg32&gt; + &lt;disp&gt; ]

        [ &lt;reg32&gt; - &lt;disp&gt; ]</code></pre>
</div>
</div>
</div></li>
<li><p>Example:</p>
<div class="sourceCode" id="cb52" data-code-line-numbers=""><pre class="sourceCode nasm code-with-copy"><code class="sourceCode nasm"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a>        <span class="kw">mov</span>   <span class="kw">esi</span><span class="op">,</span> v1       <span class="co">; esi points to v1</span></span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a>        <span class="kw">mov</span>   <span class="kw">al</span><span class="op">,</span> <span class="op">[</span><span class="kw">esi</span> <span class="op">+</span> <span class="dv">0</span><span class="op">]</span> <span class="co">; AL = 50</span></span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a>        <span class="kw">mov</span>   <span class="kw">bl</span><span class="op">,</span> <span class="op">[</span><span class="kw">esi</span> <span class="op">+</span> <span class="dv">1</span><span class="op">]</span> <span class="co">; BL = 62 </span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
</ul>
</section>
<section id="index-addressing-mode" class="level3">
<h3 class="anchored" data-anchor-id="index-addressing-mode">Index Addressing Mode</h3>
<ul>
<li><p>In this mode, there are two forms:</p>
<pre data-code-line-numbers=""><code>        [index + displacement]

        [index*scale + displacement]</code></pre></li>
<li><p>The index is a general purpose register except ESP</p></li>
<li><p>For 32-bit mode, the syntax:</p>
<div class="callout callout-style-simple callout-important no-icon">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-body-container">
<pre data-code-line-numbers=""><code>        [ &lt;reg32&gt; + &lt;disp32&gt; ]

        [ &lt;reg32&gt;*&lt;scale&gt; + &lt;disp32&gt; ]</code></pre>
<p>where &lt;scale&gt; can be either 1, 2, 4, or 8</p>
</div>
</div>
</div></li>
<li><p>In index mode, the displacement locates the beginning of an array, the index register holds the subscript of the desired array element, and scale represents the data type.</p></li>
<li><p>For example, <code>arrX[3]</code> can be translated to assembly as <code>[ecx*2 + arrX]</code> where the register <code>ECX</code> holds the value <code>3</code>.</p></li>
<li><p>Example</p>
<div class="sourceCode" id="cb55" data-code-line-numbers=""><pre class="sourceCode nasm code-with-copy"><code class="sourceCode nasm"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a>        <span class="kw">mov</span>     <span class="kw">ax</span><span class="op">,</span> <span class="dv">0</span>               <span class="co">; set sum to zero</span></span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a>        <span class="kw">mov</span>     <span class="kw">esi</span><span class="op">,</span> <span class="dv">0</span>              <span class="co">; set array index to 0</span></span>
<span id="cb55-3"><a href="#cb55-3" aria-hidden="true" tabindex="-1"></a>        <span class="kw">add</span>     <span class="kw">ax</span><span class="op">,</span> <span class="op">[</span><span class="kw">esi</span><span class="op">*</span><span class="dv">2</span> <span class="op">+</span> arrX<span class="op">]</span>  <span class="co">; add arrX[0] to sum, AX = 1</span></span>
<span id="cb55-4"><a href="#cb55-4" aria-hidden="true" tabindex="-1"></a>        <span class="kw">inc</span>     <span class="kw">esi</span>                 <span class="co">; increment the index by 1</span></span>
<span id="cb55-5"><a href="#cb55-5" aria-hidden="true" tabindex="-1"></a>        <span class="kw">add</span>     <span class="kw">ax</span><span class="op">,</span> <span class="op">[</span><span class="kw">esi</span><span class="op">*</span><span class="dv">2</span> <span class="op">+</span> arrX<span class="op">]</span>  <span class="co">; add arrX[1] to sum, AX = 1+2 = 3</span></span>
<span id="cb55-6"><a href="#cb55-6" aria-hidden="true" tabindex="-1"></a>        <span class="kw">inc</span>     <span class="kw">esi</span>                 <span class="co">; increment the index by 1 </span></span>
<span id="cb55-7"><a href="#cb55-7" aria-hidden="true" tabindex="-1"></a>        <span class="kw">add</span>     <span class="kw">ax</span><span class="op">,</span> <span class="op">[</span><span class="kw">esi</span><span class="op">*</span><span class="dv">2</span> <span class="op">+</span> arrX<span class="op">]</span>  <span class="co">; add arrX[2] to sum, AX = 3+3 = 6</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
</ul>
</section>
<section id="base-index-addressing-mode" class="level3">
<h3 class="anchored" data-anchor-id="base-index-addressing-mode">Base + Index Addressing Mode</h3>
<ul>
<li><p>In this mode, the base register holds the address of a dynamic array, while the index register holds offset address or subscript index.</p>
<ul>
<li>In 2D arrays, the base register holds the address of the beginning of a row. The index register holds the column’s subscription</li>
</ul></li>
<li><p>The syntax is:</p>
<div class="callout callout-style-simple callout-important no-icon">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-body-container">
<pre data-code-line-numbers=""><code>        [ &lt;base&gt; + &lt;index&gt; ]

        [ &lt;base&gt; + &lt;index&gt;*&lt;scale&gt; ]</code></pre>
<p>where <code>&lt;base&gt;</code> and <code>&lt;index&gt;</code> are reg32.</p>
</div>
</div>
</div></li>
</ul>
</section>
<section id="base-index-displacement-addressing-mode" class="level3">
<h3 class="anchored" data-anchor-id="base-index-displacement-addressing-mode">Base + Index + Displacement Addressing Mode</h3>
<ul>
<li><p>This mode is a combination of previous modes</p></li>
<li><p>This mode is suitable for traversing array of records.</p></li>
</ul>
</section>
<section id="summary" class="level3">
<h3 class="anchored" data-anchor-id="summary">Summary</h3>
<p>The following diagram, adopted from Intel manual summarizes the memory addressing modes:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="..\images/effectiveaddress.png" class="img-fluid figure-img" style="width:50.0%"></p>
<figcaption>Offset (or Effective Address) Computation</figcaption>
</figure>
</div>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/khalid-elbadawi\.github\.io\/C404\/");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




<script src="../site_libs/quarto-contrib/line-highlight-1.0.0/line-highlight.js" defer="true"></script>
</body></html>